{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"CO/cs61c/","title":"Cs61c","text":"<p>chap 1</p>"},{"location":"CO/cs61c/#gpu-npu","title":"GPU \u548c NPU \u662f\u4e0d\u540c\u7684","text":""},{"location":"CO/cs61c/#_1","title":"\u4e0d\u540c\u7684\u9886\u57df\u9700\u8981\u4e0d\u540c\u7684\u67b6\u6784","text":""},{"location":"CO/cs61c/#_2","title":"\u6307\u4ee4\u96c6","text":""},{"location":"CO/cs61c/#_3","title":"Cs61c","text":"<p>\u539f\u6765%d %o\u662f\u8fdb\u5236</p> <p>\u5728\u524d\u9762\u52a0\u4e2a0 \u662f\u516b\u8fdb\u5236</p> <p>\u5f88\u5947\u602a\u7684\u662f 02322\u53ef\u4ee5 \u4f46\u662f0o322\u4e0d\u53ef\u4ee5</p>"},{"location":"CO/cs61c/#_4","title":"\u65e0\u7b26\u53f7\u6574\u6570","text":""},{"location":"CO/cs61c/#_5","title":"\u6709\u7b26\u53f7\u6574\u6570","text":"<p>two 's complement \u91cc\u7a0b\u8868\u66f4\u597d\u770b </p> <p>\u504f\u5411\u7f16\u7801 \u8fd9\u4e2a\u65f6\u50190\u5c31\u662f\u504f\u7f6e\u503c </p> <p>chap 2</p> <p></p> <p>Go\u8bed\u8a00\u662f\u4ec0\u4e48</p> <p>\u8fd9\u4e2a\u95ee\u9898\u5f88\u7ecf\u5178 \ud83d\udc4d \u6211\u7ed9\u4f60\u5206\u51e0\u4e2a\u89d2\u5ea6\u8bb2\u6e05\u695a\u201c\u89e3\u91ca\u578b\u8bed\u8a00\u201d\u548c\u201c\u7f16\u8bd1\u578b\u8bed\u8a00\u201d\u7684\u533a\u522b\uff1a</p>"},{"location":"CO/cs61c/#1","title":"1. \u6267\u884c\u65b9\u5f0f\u4e0d\u540c","text":"<ul> <li> <p>\u7f16\u8bd1\u578b\u8bed\u8a00\uff08Compiled Language\uff09</p> </li> <li> <p>\u5148\u628a\u6e90\u4ee3\u7801 \u6574\u4f53\u7f16\u8bd1 \u6210\u673a\u5668\u7801\uff08\u6216\u5b57\u8282\u7801/\u76ee\u6807\u4ee3\u7801\uff09\uff0c\u518d\u8fd0\u884c\u3002</p> </li> <li>\u7f16\u8bd1\u8fc7\u7a0b\u53d1\u751f\u5728\u8fd0\u884c\u524d\u3002</li> <li>\u793a\u4f8b\uff1aC\u3001C++\u3001Go\u3001Rust</li> <li> <p>\u6d41\u7a0b\uff1a</p> <p><code>\u6e90\u4ee3\u7801  --\u7f16\u8bd1\u5668--&gt;  \u53ef\u6267\u884c\u6587\u4ef6  --\u8fd0\u884c--&gt; \u7ed3\u679c</code></p> </li> <li> <p>\u89e3\u91ca\u578b\u8bed\u8a00\uff08Interpreted Language\uff09</p> </li> <li> <p>\u6e90\u4ee3\u7801\u4e0d\u4f1a\u4e00\u6b21\u6027\u7f16\u8bd1\u6210\u673a\u5668\u7801\uff0c\u800c\u662f\u7531\u89e3\u91ca\u5668 \u9010\u884c/\u9010\u6bb5\u7ffb\u8bd1\u5e76\u6267\u884c\u3002</p> </li> <li>\u7f16\u8bd1\u548c\u6267\u884c\u51e0\u4e4e\u662f\u540c\u65f6\u53d1\u751f\u7684\u3002</li> <li>\u793a\u4f8b\uff1aPython\u3001JavaScript\u3001Ruby</li> <li> <p>\u6d41\u7a0b\uff1a</p> <p><code>\u6e90\u4ee3\u7801  --\u89e3\u91ca\u5668--&gt; \u8fd0\u884c\u7ed3\u679c</code></p> </li> </ul>"},{"location":"CO/cs61c/#2","title":"2. \u8fd0\u884c\u6548\u7387","text":"<ul> <li> <p>\u7f16\u8bd1\u578b\u8bed\u8a00\uff1a</p> </li> <li> <p>\u4e00\u6b21\u6027\u7f16\u8bd1\u6210\u673a\u5668\u7801\uff0cCPU \u76f4\u63a5\u6267\u884c \u2192 \u8fd0\u884c\u901f\u5ea6\u5feb\u3002</p> </li> <li>\u7f3a\u70b9\u662f\u7f16\u8bd1\u65f6\u95f4\u53ef\u80fd\u6bd4\u8f83\u957f\u3002</li> <li> <p>\u89e3\u91ca\u578b\u8bed\u8a00\uff1a</p> </li> <li> <p>\u8fd0\u884c\u65f6\u624d\u89e3\u91ca\uff0c\u6bcf\u6b21\u6267\u884c\u90fd\u6709\u989d\u5916\u7684\u7ffb\u8bd1\u5f00\u9500 \u2192 \u8fd0\u884c\u901f\u5ea6\u8f83\u6162\u3002</p> </li> <li>\u4f46\u542f\u52a8\u5feb\u3001\u8c03\u8bd5\u7075\u6d3b\u3002</li> </ul>"},{"location":"CO/cs61c/#3","title":"3. \u53ef\u79fb\u690d\u6027","text":"<ul> <li> <p>\u7f16\u8bd1\u578b\u8bed\u8a00\uff1a</p> </li> <li> <p>\u7f16\u8bd1\u540e\u5f97\u5230\u7684\u5e73\u53f0\u76f8\u5173\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u79fb\u690d\u65f6\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u3002</p> </li> <li>\u6bd4\u5982 Windows \u4e0a\u7f16\u8bd1\u7684 <code>.exe</code>\uff0c\u4e0d\u80fd\u76f4\u63a5\u5728 Linux \u4e0a\u8fd0\u884c\u3002</li> <li> <p>\u89e3\u91ca\u578b\u8bed\u8a00\uff1a</p> </li> <li> <p>\u53ea\u8981\u6709\u89e3\u91ca\u5668\uff0c\u5c31\u80fd\u8fd0\u884c\u76f8\u540c\u7684\u6e90\u4ee3\u7801\u3002</p> </li> <li>\u6bd4\u5982 Python \u811a\u672c\u5728 Linux/Windows/Mac \u4e0a\u51e0\u4e4e\u65e0\u9700\u6539\u52a8\u3002</li> </ul>"},{"location":"CO/cs61c/#4","title":"4. \u8c03\u8bd5\u548c\u5f00\u53d1\u4f53\u9a8c","text":"<ul> <li> <p>\u7f16\u8bd1\u578b\u8bed\u8a00\uff1a</p> </li> <li> <p>\u8fd0\u884c\u524d\u5fc5\u987b\u7f16\u8bd1\uff0c\u5f00\u53d1\u6548\u7387\u7a0d\u4f4e\uff0c\u4f46\u9519\u8bef\u80fd\u5728\u7f16\u8bd1\u65f6\u53d1\u73b0\u3002</p> </li> <li>\u66f4\u9002\u5408\u5927\u89c4\u6a21\u3001\u9ad8\u6027\u80fd\u7684\u9879\u76ee\u3002</li> <li> <p>\u89e3\u91ca\u578b\u8bed\u8a00\uff1a</p> </li> <li> <p>\u76f4\u63a5\u8fd0\u884c\u6e90\u4ee3\u7801\uff0c\u8c03\u8bd5\u5feb\uff0c\u7075\u6d3b\u6027\u9ad8\u3002</p> </li> <li>\u9002\u5408\u811a\u672c\u3001\u5feb\u901f\u539f\u578b\u5f00\u53d1\u3002</li> </ul>"},{"location":"CO/cs61c/#5","title":"5. \u4e2d\u95f4\u5f62\u6001\uff08\u6df7\u5408\u578b\u8bed\u8a00\uff09","text":"<p>\u5f88\u591a\u73b0\u4ee3\u8bed\u8a00\u662f \u7f16\u8bd1 + \u89e3\u91ca\u6df7\u5408\u6a21\u5f0f\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>Java\uff1a\u5148\u7f16\u8bd1\u6210\u5b57\u8282\u7801\uff08.class \u6587\u4ef6\uff09\uff0c\u518d\u7531 JVM \u89e3\u91ca/\u5373\u65f6\u7f16\u8bd1\uff08JIT\uff09\u6210\u673a\u5668\u7801\u3002</li> <li>Python (PyPy, CPython)\uff1a\u4e00\u822c\u9010\u884c\u89e3\u91ca\uff0c\u4f46\u4e5f\u53ef\u4ee5\u7528 JIT \u6280\u672f\u63d0\u5347\u6027\u80fd\u3002</li> <li>JavaScript (V8 \u5f15\u64ce)\uff1a\u4e00\u8fb9\u89e3\u91ca\u4e00\u8fb9\u5373\u65f6\u7f16\u8bd1\u4f18\u5316\u3002</li> </ul> <p>\u2705 \u603b\u7ed3\u4e00\u53e5\u8bdd\uff1a</p> <ul> <li>\u7f16\u8bd1\u578b\u8bed\u8a00\uff1a\u201c\u5148\u7ffb\u8bd1\uff0c\u518d\u6267\u884c\u201d \u2192 \u9ad8\u6548\uff0c\u5e73\u53f0\u76f8\u5173\u3002</li> <li>\u89e3\u91ca\u578b\u8bed\u8a00\uff1a\u201c\u8fb9\u7ffb\u8bd1\uff0c\u8fb9\u6267\u884c\u201d \u2192 \u7075\u6d3b\uff0c\u53ef\u79fb\u690d\u6027\u5f3a\u3002</li> </ul> <p>spark</p> <p>cython</p> <p>REPL \u662f\u201cRead-Eval-Print Loop\u201d\u7684\u7f29\u5199\uff0c\u4e2d\u6587\u5e38\u79f0\u4e3a\u201c\u4ea4\u4e92\u5f0f\u89e3\u91ca\u5668\u201d\u6216\u201c\u4ea4\u4e92\u5f0f\u547d\u4ee4\u884c\u73af\u5883\u201d\u3002</p> <p>\u5b83\u7684\u5de5\u4f5c\u6d41\u7a0b\u662f\uff1a</p> <ul> <li> <p>Read\uff08\u8bfb\u53d6\uff09\uff1a\u8bfb\u53d6\u7528\u6237\u8f93\u5165\u7684\u4ee3\u7801\u6216\u547d\u4ee4\u3002</p> </li> <li> <p>Eval\uff08\u6c42\u503c\uff09\uff1a\u5bf9\u8f93\u5165\u7684\u5185\u5bb9\u8fdb\u884c\u8ba1\u7b97\u6216\u6267\u884c\u3002</p> </li> <li> <p>Print\uff08\u8f93\u51fa\uff09\uff1a\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u5c4f\u5e55\u3002</p> </li> <li> <p>Loop\uff08\u5faa\u73af\uff09\uff1a\u7ee7\u7eed\u7b49\u5f85\u4e0b\u4e00\u6b21\u8f93\u5165\u3002</p> </li> </ul> <p>REPL \u5e38\u89c1\u4e8e Python\u3001JavaScript\u3001Scala \u7b49\u7f16\u7a0b\u8bed\u8a00\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5b9e\u65f6\u8f93\u5165\u4ee3\u7801\u3001\u7acb\u5373\u770b\u5230\u7ed3\u679c\uff0c\u975e\u5e38\u9002\u5408\u5b66\u4e60\u3001\u8c03\u8bd5\u548c\u5b9e\u9a8c\u3002\u6bd4\u5982\u5728 Python \u4e2d\uff0c\u76f4\u63a5\u8f93\u5165 python \u547d\u4ee4\u5c31\u80fd\u8fdb\u5165 REPL \u73af\u5883\u3002</p> <p>\u4ee5 Python \u7684 REPL \u4e3a\u4f8b\uff1a</p> <p>\u5728\u547d\u4ee4\u884c\u8f93\u5165 python \u56de\u8f66\uff0c\u8fdb\u5165\u4ea4\u4e92\u5f0f\u73af\u5883\u3002 \u8f93\u5165\u8868\u8fbe\u5f0f\uff0c\u6bd4\u5982\uff1a</p> <pre><code>&gt;&gt;&gt; 2 + 3\n5\n</code></pre> <p>\u4f60\u53ef\u4ee5\u7ee7\u7eed\u8f93\u5165\u4ee3\u7801\uff0c\u6bd4\u5982\uff1a</p> <pre><code>&gt;&gt;&gt; print(\"Hello, world!\")\nHello, world!\n</code></pre> <p>\u6bcf\u8f93\u5165\u4e00\u884c\uff0cREPL \u90fd\u4f1a\u7acb\u5373\u6267\u884c\u5e76\u663e\u793a\u7ed3\u679c\u3002\u8fd9\u5c31\u662f REPL \u7684\u5178\u578b\u7528\u6cd5\u3002\u5176\u4ed6\u8bed\u8a00\u5982 JavaScript\uff08node\uff09\u3001Scala \u4e5f\u6709\u7c7b\u4f3c\u7684 REPL \u73af\u5883\u3002</p> <p>docker</p> <p>\u963f\u59c6\u8fbe\u5c14\u5b9a\u7406\uff08Amdahl's Law\uff09\u662f\u5e76\u884c\u8ba1\u7b97\u9886\u57df\u7684\u91cd\u8981\u7406\u8bba\uff0c\u7528\u4e8e\u4f30\u7b97\u7cfb\u7edf\u52a0\u901f\u7684\u6781\u9650\u3002</p> <p>\u5185\u5bb9\u5982\u4e0b\uff1a</p> <p>\u5047\u8bbe\u4e00\u4e2a\u4efb\u52a1\u4e2d\uff0c\u90e8\u5206\u53ef\u4ee5\u5e76\u884c\u52a0\u901f\uff0c\u90e8\u5206\u5fc5\u987b\u4e32\u884c\u6267\u884c\u3002</p> <p>\u8bbe\u4efb\u52a1\u4e2d\u53ef\u5e76\u884c\u90e8\u5206\u5360\u6bd4\u4e3a P\uff0c\u4e32\u884c\u90e8\u5206\u5360\u6bd4\u4e3a 1-P\u3002</p> <p>\u4f7f\u7528 N \u4e2a\u5904\u7406\u5668\u65f6\uff0c\u6700\u5927\u52a0\u901f\u6bd4 S \u4e3a\uff1a</p> <p>S = 1 / [(1-P) + P/N]</p> <p>\u542b\u4e49\uff1a</p> <p>\u4e32\u884c\u90e8\u5206\u8d8a\u5c0f\uff0c\u6574\u4f53\u52a0\u901f\u6548\u679c\u8d8a\u597d\u3002 \u5373\u4f7f\u5904\u7406\u5668\u6570\u91cf\u65e0\u9650\uff0c\u7cfb\u7edf\u52a0\u901f\u4e5f\u53d7\u9650\u4e8e\u4e32\u884c\u90e8\u5206\u3002 \u963f\u59c6\u8fbe\u5c14\u5b9a\u7406\u8bf4\u660e\u4e86\u5e76\u884c\u5316\u7684\u74f6\u9888\uff0c\u6307\u5bfc\u6211\u4eec\u4f18\u5316\u7a0b\u5e8f\u65f6\u8981\u5c3d\u91cf\u51cf\u5c11\u4e0d\u53ef\u5e76\u884c\u7684\u90e8\u5206\u3002</p> <p>\u662f\u7684\uff0c\u5728 C/C++ \u8bed\u8a00\u4e2d\uff0c\u4ee5 # \u5f00\u5934\u7684\u8bed\u53e5\uff08\u5982 #include\u3001#define\u3001#ifdef \u7b49\uff09\u662f\u201c\u9884\u5904\u7406\u547d\u4ee4\u201d\u6216\u201c\u9884\u5904\u7406\u6307\u4ee4\u201d\u3002</p> <p>\u8fd9\u4e9b\u547d\u4ee4\u5728\u7f16\u8bd1\u4e4b\u524d\u7531\u9884\u5904\u7406\u5668\u5904\u7406\uff0c\u7528\u4e8e\uff1a</p> <p>\u5305\u542b\u5934\u6587\u4ef6\uff08#include\uff09 \u5b8f\u5b9a\u4e49\uff08#define\uff09 \u6761\u4ef6\u7f16\u8bd1\uff08#ifdef\u3001#ifndef\u3001#endif \u7b49\uff09</p>"},{"location":"CO/cs61c/#include-include-fileh","title":"include  \u548c #include \"file.h\" \u7684\u533a\u522b\u5728\u4e8e\u5934\u6587\u4ef6\u7684\u67e5\u627e\u8def\u5f84\uff1a","text":""},{"location":"CO/cs61c/#include","title":"include  <p>\u53ea\u5728\u7cfb\u7edf\u5934\u6587\u4ef6\u76ee\u5f55\uff08\u5982\u7f16\u8bd1\u5668\u81ea\u5e26\u7684 include \u8def\u5f84\uff09\u4e2d\u67e5\u627e file.h\u3002 \u5e38\u7528\u4e8e\u6807\u51c6\u5e93\u5934\u6587\u4ef6\uff0c\u5982 \u3001\u3002","text":""},{"location":"CO/cs61c/#include-fileh","title":"include \"file.h\" <p>\u5148\u5728\u5f53\u524d\u6e90\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u67e5\u627e file.h\uff0c\u627e\u4e0d\u5230\u518d\u53bb\u7cfb\u7edf\u5934\u6587\u4ef6\u76ee\u5f55\u67e5\u627e\u3002 \u5e38\u7528\u4e8e\u9879\u76ee\u81ea\u5b9a\u4e49\u7684\u5934\u6587\u4ef6\u3002 \u603b\u7ed3\uff1a</p> <p>&lt;...&gt; \u7528\u4e8e\u7cfb\u7edf\u6216\u7b2c\u4e09\u65b9\u5e93\u5934\u6587\u4ef6\u3002 \"...\" \u7528\u4e8e\u672c\u5730\u6216\u81ea\u5b9a\u4e49\u5934\u6587\u4ef6\u3002</p>  <pre><code>#define PI (3.14159)\n</code></pre> <p>\u52a0\u4e2a\u62ec\u53f7\u66f4\u5b89\u5168 \u4f46\u662f\u4f1a\u6709\u4e00\u4e9b\u5947\u602a\u7684\u526f\u4f5c\u7528 \u6bd4\u5982\u51fd\u6570\u7684\u526f\u4f5c\u7528\u4f1a\u88ab\u4f7f\u7528\u4e24\u6b21</p>  <pre><code>int main(void)\nint main(int argc, char *argv[])\n</code></pre> <p></p> <p>\u6240\u4ee5\u5584\u7528inttype</p> <p></p>  <p>C\u8bed\u8a00\u6709\u4e2agoto\u8bed\u6cd5 \u6709\u70b9\u50cfBASIC</p> <p>while\u5faa\u73af\u68c0\u67e5\u4e0d\u8981\u57fa\u4e8e\u6d6e\u70b9\u6570</p> <pre><code>pi = 4.0 * atan(1.0) \n</code></pre>","text":""},{"location":"CO/cs61c/#chap-4","title":"chap 4 <p>\u6307\u4ee4\u96c6\u67b6\u6784\uff08Instruction Set Architecture\uff0c\u7b80\u79f0 ISA\uff09\u662f\u6307\u8ba1\u7b97\u673a\u5904\u7406\u5668\u80fd\u591f\u8bc6\u522b\u548c\u6267\u884c\u7684\u5168\u90e8\u6307\u4ee4\u7684\u89c4\u8303\u548c\u8bbe\u8ba1\u6807\u51c6\u3002\u5b83\u5b9a\u4e49\u4e86\u5904\u7406\u5668\u652f\u6301\u54ea\u4e9b\u64cd\u4f5c\uff08\u5982\u52a0\u6cd5\u3001\u5b58\u50a8\u3001\u8df3\u8f6c\u7b49\uff09\u3001\u6307\u4ee4\u683c\u5f0f\u3001\u5bfb\u5740\u65b9\u5f0f\u3001\u6570\u636e\u7c7b\u578b\u548c\u5bc4\u5b58\u5668\u7ed3\u6784\u7b49\u3002</p> <p>\u6307\u4ee4\u96c6\u67b6\u6784\u662f\u786c\u4ef6\u548c\u8f6f\u4ef6\u4e4b\u95f4\u7684\u63a5\u53e3\uff1a</p> <p>\u5bf9\u786c\u4ef6\u6765\u8bf4\uff0cISA \u51b3\u5b9a\u4e86 CPU \u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0\u65b9\u5f0f\u3002 \u5bf9\u8f6f\u4ef6\u6765\u8bf4\uff0c\u7f16\u8bd1\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u6839\u636e ISA \u751f\u6210\u548c\u6267\u884c\u673a\u5668\u7801\u3002 \u5e38\u89c1\u7684\u6307\u4ee4\u96c6\u67b6\u6784\u6709 x86\u3001ARM\u3001MIPS\u3001RISC-V \u7b49\u3002</p> <p>RISC-V \u662f\u4e00\u79cd\u5f00\u6e90\u7684\u6307\u4ee4\u96c6\u67b6\u6784\uff08ISA\uff09\uff0c\u5c5e\u4e8e\u7cbe\u7b80\u6307\u4ee4\u96c6\u8ba1\u7b97\uff08RISC\uff09\u7c7b\u578b\u3002\u5b83\u7531\u52a0\u5dde\u5927\u5b66\u4f2f\u514b\u5229\u5206\u6821\u4e8e 2010 \u5e74\u63d0\u51fa\uff0c\u8bbe\u8ba1\u76ee\u6807\u662f\u7b80\u5355\u3001\u7075\u6d3b\u3001\u6613\u4e8e\u6269\u5c55\uff0c\u5e76\u4e14\u514d\u8d39\u5f00\u653e\u7ed9\u4efb\u4f55\u4eba\u4f7f\u7528\u548c\u4fee\u6539\u3002</p> <p>\u6307\u4ee4\u96c6 \uff1a \u6c47\u7f16\u8bed\u8a00\u7ec4\u6210</p> <p></p> <p>\u5904\u7406\u5668\u4e3b\u9891\u662f4GHz \u5219\u6bcf0.25\u7eb3\u79d2\u53ef\u4ee5\u8bbf\u95ee\u4e00\u6b21\u5bc4\u5b58\u5668 </p> <p>32\u4f4d\u7684\uff08\u4e00\u4e2aword\uff09  4 \u5b57\u8282 </p> <p>1\u4f4d\u53ea\u80fd\u5b58\u50a8 1\u4e2a\u4e8c\u8fdb\u5236\u6570\u5b57\uff1a0 \u6216 1</p> <p>\u5bc4\u5b58\u5668\u8def\u5f84\u4e3b\u8981\u5305\u62ec\uff1a</p> <p>\u6307\u4ee4\u4ece\u5bc4\u5b58\u5668\u8bfb\u51fa\u6570\u636e</p> <p>\u6570\u636e\u5728 ALU \u8fdb\u884c\u8fd0\u7b97</p> <p>\u8fd0\u7b97\u7ed3\u679c\u5199\u56de\u5bc4\u5b58\u5668</p> <p>\u5bc4\u5b58\u5668\u548c\u5927\u8111\u4e00\u6837\u5feb</p> <p>RISC-V\u670932\u4e2a\u5bc4\u5b58\u5668 x0\u5230x31</p> <p>x0\u786c\u8fde\u7ebf\u4e3a0  \u6c38\u8fdc\u5b580</p> <p>\u5bc4\u5b58\u5668\u52a0\u51cf\u7684\u6c47\u7f16\u8bed\u8a00\uff1a</p> <p></p>","text":""},{"location":"CO/cs61c/#_6","title":"\u662f\u6ce8\u91ca <p>\u52a0\u7acb\u5373\u6570</p> <p>ADDI rd, rs1, imm</p> <p>(\u6709\u4e00\u5b9a\u8303\u56f4 \u5c0f\u4e8e32\u4f4d \u9700\u8981\u5176\u4ed6\u4fe1\u606f)</p> <p>\u51cf\u6cd5\u7acb\u5373\u6570</p> <p>\u52a0\u4e2a\u8d1f\u6570\u5457</p> <p>\u6700\u5e38\u89c1\u7acb\u5373\u6570\u662f0 \u5c31\u662fx0</p> <p>\u5176\u5b9e\u662f\u628a\u4e00\u4e2a\u79fb\u5230\u53e6\u4e00\u4e2a\u5bc4\u5b58\u5668</p> <p>\u6570\u636e\u901a\u5e38\u6bd432\u4f4d\u5c0f\uff0c\u4f46\u5f88\u5c11\u5c0f\u4e8e8\u4f4d\uff08\u4f8b\u5982char\u7c7b\u578b\uff09\u3002\u5f53\u6240\u6709\u6570\u636e\u90fd\u662f8\u4f4d\u7684\u500d\u6570\u65f6\uff0c\u5904\u7406\u8d77\u6765\u5f88\u65b9\u4fbf\u3002</p> <p>\u4e00\u4e2a8\u4f4d\u7684\u6570\u636e\u5757\u88ab\u79f0\u4e3a\u4e00\u4e2a\u5b57\u8282\uff08byte\uff09\u3002</p> <p>\u5185\u5b58\u5730\u5740\u5b9e\u9645\u4e0a\u662f\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u8fdb\u884c\u5bfb\u5740\u7684</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u201c\u5b57\u201d\uff08Word\uff09\uff0c\u5b83\u7684\u5730\u5740\u88ab\u5b9a\u4e49\u4e3a\u8be5\u5b57\u4e2d\u6700\u53f3\u8fb9\u90a3\u4e2a\u5b57\u8282\uff08\u4e5f\u5c31\u662f\u6700\u4f4e\u6709\u6548\u5b57\u8282\uff0cLeast-Significant Byte, LSB\uff09\u7684\u5730\u5740\u3002</p> <p>\u8fd9\u6b63\u662f\u5c0f\u7aef\u5e8f\u7684\u5b9a\u4e49\uff1a\u6700\u4f4e\u6709\u6548\u5b57\u8282\u5b58\u50a8\u5728\u6700\u4f4e\u7684\u5185\u5b58\u5730\u5740\u3002</p> <p>\u201c\u5b57\u5730\u5740\u201d\u4e4b\u95f4\u7684\u95f4\u9694\u662f4\u4e2a\u5b57\u8282\uff0c\u56e0\u4e3a\u4e00\u4e2a\u5b57\u662f4\u4e2a\u5b57\u8282  \u5e38\u89c1\u91c7\u7528\u5c0f\u7aef\u5e8f\u7684\u4f53\u7cfb\u7ed3\u6784\u6709\uff1ax86\u3001x86-64\u3001\u90e8\u5206 ARM</p> <p>\u5c0f\u7aef\u5e8f\u7684\u4f18\u70b9\uff1a</p> <p>\u5904\u7406\u4f4e\u4f4d\u6570\u636e\u65f6\u66f4\u9ad8\u6548</p>","text":""},{"location":"CO/cs61c/#data-transfer-instruction","title":"Data Transfer Instruction <p>\u5185\u5b58\u5c42\u6b21\u7ed3\u6784 </p> <p>memory \u5185\u5b58 </p> <p>\u5bf9\u6bcf\u4e2a\u5b57\u8282\u5bfb\u5740 \u5b58\u7684\u662f\u6570\u5b57 \u6570\u5b57\u662f32\u4f4d\u5bbd\u53734\u4e2a\u5b57\u8282 </p> <p>lw $rt, offset($rs)</p> <p>$rt\uff1a\u76ee\u6807\u5bc4\u5b58\u5668\uff08register target\uff09\u2014\u2014 \u8981\u5b58\u653e\u6570\u636e\u7684\u5bc4\u5b58\u5668</p> <p>$rs\uff1a\u57fa\u5740\u5bc4\u5b58\u5668\uff08register source\uff09\u2014\u2014 \u4fdd\u5b58\u5185\u5b58\u5730\u5740\u7684\u57fa\u5740</p> <p>offset\uff1a\u504f\u79fb\u91cf\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\uff0c\u7528\u4e8e\u5b9a\u4f4d\u5185\u5b58\u4e2d\u7684\u5177\u4f53\u5730\u5740</p> <p>lw \u4e00\u6b21\u52a0\u8f7d 4 \u5b57\u8282\uff0832 \u4f4d\uff09</p> <p>$s1 \u5b58\u7684\u5c31\u662f\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff08\u6216\u57fa\u5730\u5740\uff09\u3002</p> <p>\u53ef\u4ee5\u628a $s1 \u770b\u6210\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\uff0c lw \u5c31\u662f\u201c\u901a\u8fc7\u6307\u9488\u53d6\u503c\u201d\u7684\u64cd\u4f5c\u3002</p> <p>\u76f8\u5f53\u4e8ec\u8bed\u8a00</p> <pre><code>t0 = *(s1 + 1);  // \u6bcf\u4e2a word \u5360 4 \u5b57\u8282\uff0c\u6240\u4ee5 +4 \u8868\u793a\u4e0b\u4e00\u4e2a\u5143\u7d20\n</code></pre> <p>\u504f\u79fb\u91cf\u5fc5\u987b\u662f\u5e38\u91cf \u5728\u6c47\u7f16\u65f6\u5df2\u77e5 \u662f4\u7684\u500d\u6570\uff08\u4f46\u662f\u5176\u5b9e\u5141\u8bb8\u4e0d\u5bf9\u9f50\uff09</p> <p>\u6570\u636e\u6d41\u4ece\u53f3\u5411\u5de6  \u5185\u5b58\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668 </p> <p>\u5bc4\u5b58\u5668\u5b58\u5230\u5185\u5b58\u91cc</p> <p>data\u4ece\u5de6\u5230\u53f3</p> <p>\u8fd9\u4fe9\u5b58\u7684\u53d6\u7684\u90fd\u662f32\u4f4d\uff08word\uff09</p> <p></p> <p>\u5199\u5165\u76ee\u6807\u5bc4\u5b58\u5668\u7684\u4f4e\u5b57\u8282\u4f4d</p> <p>\u5982\u679c\u4f20\u8f93\u7684\u662f\u5e26\u7b26\u53f7\u6570</p> <p>\u4fdd\u7559\u7b26\u53f7 \u628a\u5199\u5165\u7684\u90a3\u4e2a\u4f4e\u4f4d\u5b57\u8282\u53d6\u51fa\u6700\u9ad8\u6709\u6548\u4f4d \u6269\u5c55\u5230\u8fd9\u4e2a\u5b57\uff084\u4e2a\u5b57\u8282\uff09\u7684\u6240\u6709\u9ad8\u4f4d</p> <p></p> <p>\u652f\u6301\u65e0\u7b26\u53f7\u6570\u8f6c\u79fb\uff0c\u4e0d\u6269\u5c55\u7b26\u53f7\u4f4d\uff0c\u5c31\u7528\u96f6\u586b\u5145\u9ad8\u4f4d\u5b57\u8282</p> <p>\u5373 lbu  \uff08unsigned byte loads\uff09 \u8bed\u6cd5\u4e0elb\u76f8\u540c</p> <p>sb\u4e0d\u652f\u6301\u7b26\u53f7\u4f4d\u6269\u5c55\uff0c\u4ed6\u53ea\u662f\u5b58\u4e00\u4e0b</p>","text":""},{"location":"CO/cs61c/#_7","title":"\u6808\uff1a\u540e\u8fdb\u5148\u51fa\uff08\u76d8\u5b50\uff09","text":""},{"location":"CO/cs61c/#computer-decision-making","title":"Computer Decision Making \u8ba1\u7b97\u673a\u51b3\u7b56 <p>\u5206\u652f\u51b3\u7b56  \u6539\u53d8\u6307\u4ee4\u6267\u884c\u987a\u5e8f</p> <p>if-statement:</p>","text":""},{"location":"CO/cs61c/#_8","title":"\u6709\u6761\u4ef6\u5206\u652f\uff09","text":"<p> beq reg1 ,reg2 ,L1  \u6bd4\u8f83reg1\u548creg2\u5bc4\u5b58\u5668\u7684\u5185\u5bb9 \u76f8\u540c\u5c31\u53bbL1\uff08L1\u662f\u53e6\u4e00\u90e8\u5206\u4ee3\u7801\u7684\u5730\u5740\uff09</p> <p>\u4e0d\u76f8\u540c\u5c31\u53bb\u4e0b\u4e00\u6761\u6307\u4ee4</p> <p>bne \u6b63\u597d\u76f8\u53cd \u4e0d\u540c\u624d\u8df3\u8f6c</p> <p>blt less than\u5206\u652f</p> <p>bge \u5927\u4e8e\u7b49\u4e8e\u65f6\u5206\u652f</p> <p>\u65e0\u7b26\u53f7\u7248\u672c\u7684bltu bgeu </p>"},{"location":"CO/cs61c/#_9","title":"\u65e0\u6761\u4ef6\u5206\u652f \uff09","text":"<p>\u5c31\u662f\u8df3\u8f6c \u5bf9\u5e94always\u8bed\u53e5  \u50cf\u4e00\u4e2agoto</p> <p>\u53ef\u4ee5\u7528\u65e0\u6761\u4ef6\u5206\u652f\u505a\u6709\u6761\u4ef6\u5206\u652f \u4f46\u662f\u65e0\u6761\u4ef6\u5206\u652f\u8df3\u8f6c\u8303\u56f4\u66f4\u5927 </p> <p>\u4e3a\u4ec0\u4e48\u6ca1\u6709\u5927\u4e8e\u65f6\u6216\u5c0f\u4e8e\u7b49\u4e8e\u65f6\u5206\u652f \u76f4\u63a5\u6362\u4e00\u4e0b\u5bc4\u5b58\u5668\u4f4d\u7f6e\u5c31\u884c</p> <p>\u6ca1\u6709\u4e0e\u7acb\u5373\u6570\u8fdb\u884c\u5206\u652f\u7684\u6307\u4ee4</p> <p></p> <p>\u4e0d\u5199\u8df3\u8f6c\u5c31\u4f1a\u8d70else</p> <p></p> <p>\u628ax8\u590d\u5236\u5230x9  \u4e0d\u60f3\u7834\u574f\u5185\u5bb9</p> <p>\u8fd8\u6709\u521d\u59cb\u5316</p> <p>\u5730\u5740+4 \u56e0\u4e3a\u5360\u4e864\u4e2a\u5b57\u8282</p>"},{"location":"CO/cs61c/#logical-instruction","title":"\u903b\u8f91\u6307\u4ee4 Logical Instruction <p>\u4e0e\u7b97\u6570\u6307\u4ee4\u6570\u636e\u901a\u8def\u4e00\u6837 \u90fd\u662fALU</p>","text":""},{"location":"CO/cs61c/#and","title":"and \u7528\u4e8e\u9694\u79bb","text":""},{"location":"CO/cs61c/#not-xor111111","title":"not  \u7528xor\u548c111111\u5b9e\u73b0","text":""},{"location":"CO/cs61c/#sll-0","title":"\u5de6\u79fbsll \u76f8\u5f53\u4e8e\u4e58\u6cd5 \u88650","text":"<p>\u00d712\uff1a\u00d78 + \u00d74</p>"},{"location":"CO/cs61c/#srl-0","title":"\u53f3\u79fbsrl \u586b0","text":""},{"location":"CO/cs61c/#_10","title":"\u5f53\u5904\u7406\u6709\u7b26\u53f7\u4f4d\u65f6\uff1a\u7b97\u6570\u53f3\u79fb  \u590d\u5236\u7b26\u53f7\u4f4d\u5230\u53f3\u79fb\u4ea7\u751f\u7684\u7a7a\u4f4d","text":""},{"location":"CO/cs61c/#_11","title":"\u7a0b\u5e8f <p> \u53ef\u6267\u884c\u6587\u4ef6\u592a\u5927\u4e86\uff0c\u8981\u653e\u5185\u5b58\u91cc</p> <p>\u5185\u5b58\u6309\u5b57\u8282\u5bfb\u5740</p> <p>\u901a\u5e38\u6307\u4ee4\u5bbd\u5ea6\u4e3a32\u4f4d  \u987a\u5e8f\u6267\u884c\u9664\u975e\u8df3\u8f6c</p> <p> PC \u7a0b\u5e8f\u8ba1\u6570\u5668 \uff08Program Counter\uff09\uff1a \u4e00\u4e2a\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\uff0c\u5b58\u50a8\u5c06\u8981\u6267\u884c\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5b57\u8282\u5730\u5740</p> <p>control unit use PC to fetch instruction from Memory \uff0ctake a look at what is the instruction and execute it by using the data path and the Memory</p> <p>\u66f4\u65b0PC  \u4e24\u6761\u76f8\u90bb\u6307\u4ee4\u5dee\u4e00\u4e2a\u5b57 \u5c31\u662f4\u4e2a\u5b57\u8282  PC\u52a0\u56db\u5b57\u8282\u6216\u8005\u8df3\u8f6c\u5230\u65b0\u5730\u5740  \u8ba9\u4ee3\u7801\u66f4\u6709\u53ef\u8bfb\u6027\uff1a</p> <p>Load\u7acb\u5373\u6570\u6307\u4ee4\uff1a \u628a\u7acb\u5373\u6570\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e2d \u4e0d\u4e0e\u5185\u5b58\u4ea4\u4e92</p> <p>nop \u65e0\u64cd\u4f5c  \u5904\u7406\u5668\u7b49\u5f85 \u539f\u5730\u7a7a\u8f6c x0\u4f5c\u4e3a\u76ee\u7684\u5bc4\u5b58\u5668\u7684\u6307\u4ee4\u90fd\u662fnop</p>","text":""},{"location":"CO/cs61c/#_12","title":"\u51fd\u6570\u8c03\u7528 <p>  ra \u4fdd\u5b58\u7684\u5c31\u662f\u6267\u884c\u5b8c\u51fd\u6570\u540e\u4e0b\u4e00\u6b65\u8981\u6267\u884c\u7684\u6307\u4ee4\u7684\u5730\u5740</p> <p>\u8fd4\u56de\u5730\u5740\uff08Return Address\uff09\uff1a \u662f\u4e00\u6761\u51fd\u6570\u8c03\u7528\u6307\u4ee4\u6267\u884c\u540e\uff0c\u7a0b\u5e8f\u5e94\u5f53\u7ee7\u7eed\u6267\u884c\u7684\u90a3\u6761\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\uff08PC \u503c\uff09</p> <p>\u5f53\u4f60\u201c\u8df3\u5230\u51fd\u6570\u53bb\u6267\u884c\u201d\u65f6\uff0c</p> <p>\u4f60\u5fc5\u987b\u8bb0\u4f4f\u201c\u56de\u6765\u4ee5\u540e\u8be5\u4ece\u54ea\u7ee7\u7eed\u6267\u884c\u201d\u3002</p> <p>\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u5730\u5740\uff08\u901a\u5e38\u662f PC + 4\uff09\u5c31\u662f\u201c\u8fd4\u56de\u5730\u5740\u201d\u3002</p> <p> </p> <p>\u5b9e\u9645\u7684\u6307\u4ee4\uff1a</p> <ul> <li> <p>jal rd, label  jump-and-link</p> </li> <li> <p>jalr rd,rs,imm   jump-and-link-register \uff08\u5176\u4ed6\u90fd\u662f\u4f2a\u6307\u4ee4\uff09</p> </li> </ul>    \u6307\u4ee4 \u542b\u4e49 \u5e38\u7528\u4e8e     <code>jal rd, label</code> \u8df3\u8f6c\u5230\u7acb\u5373\u6570\u504f\u79fb\u5730\u5740\uff08PC \u76f8\u5bf9\uff09\uff0c\u5e76\u628a\u8fd4\u56de\u5730\u5740\u5199\u5165 <code>rd</code> \u51fd\u6570\u8c03\u7528   <code>jalr rd, offset(rs1)</code> \u8df3\u8f6c\u5230\u5bc4\u5b58\u5668 <code>rs1 + offset</code> \u6307\u5b9a\u7684\u5730\u5740\uff0c\u5e76\u628a\u8fd4\u56de\u5730\u5740\u5199\u5165 <code>rd</code> \u51fd\u6570\u8fd4\u56de\u3001\u95f4\u63a5\u8df3\u8f6c    <p>\u5728 RISC-V \u6c47\u7f16\u4e2d\uff0cret \u662f\u4e00\u4e2a\u4f2a\u6307\u4ee4\uff0c\u5c55\u5f00\u540e\u662f\uff1a</p> <p>jalr x0, 0(ra)</p> <p>\u8df3\u8f6c\u5230 ra \u4e2d\u4fdd\u5b58\u7684\u8fd4\u56de\u5730\u5740\uff0c\u4e0d\u4fdd\u5b58\u65b0\u7684\u8fd4\u56de\u5730\u5740\uff08\u56e0\u4e3a rd=x0\uff09</p> <p></p> <p>\u51fd\u6570\u8c03\u7528\u4e4b\u524d\uff0c\u628a\u5bc4\u5b58\u5668\u4e2d\u7684\u65e7\u503c\u5b58\u5230\u5185\u5b58\u91cc\uff0c\u5c31\u662fstack </p>","text":""},{"location":"CO/cs61c/#stack","title":"stack <p>x0\u662f0  x1\u662f\u8fd4\u56de\u5730\u5740 x2\u662f\u5806\u6808\u6307\u9488 </p> <p>sp is the stack pointer \u5b58\u5806\u6808\u7684\u5730\u5740   </p>","text":""},{"location":"CO/cs61c/#_13","title":"\ud83e\udde9 \u4e00\u3001\u4e3a\u4ec0\u4e48\u51fd\u6570\u8c03\u7528\u8981\u7528\u201c\u6808\u201d\uff1f","text":"<p>\u56e0\u4e3a\u5728\u7a0b\u5e8f\u6267\u884c\u65f6\uff0c\u51fd\u6570\u53ef\u4ee5\uff1a</p> <ul> <li>\u5d4c\u5957\u8c03\u7528\uff08<code>main \u2192 f \u2192 g \u2192 h</code>\uff09</li> <li>\u6709\u5c40\u90e8\u53d8\u91cf\uff08\u6bcf\u4e2a\u51fd\u6570\u7684\u53d8\u91cf\u8981\u9694\u79bb\uff09</li> <li>\u6709\u8fd4\u56de\u5730\u5740\u8981\u4fdd\u5b58\uff08<code>ra</code> \u4e0d\u80fd\u88ab\u8986\u76d6\uff09</li> </ul> <p>\u4e8e\u662f\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\u7684\u5b58\u50a8\u7ed3\u6784\uff0c \u65e2\u80fd\u4fdd\u5b58\u8fd9\u4e9b\u4fe1\u606f\uff0c\u53c8\u80fd\u5728\u51fd\u6570\u8fd4\u56de\u65f6\u81ea\u52a8\u6062\u590d\u3002</p> <p>\u8fd9\u4e2a\u7ed3\u6784\u5c31\u662f \u8c03\u7528\u6808\uff08call stack\uff09\u3002</p>"},{"location":"CO/cs61c/#spstack-pointer","title":"\ud83e\udde0 \u4e8c\u3001\u6808\u7684\u7ba1\u7406\u5bc4\u5b58\u5668\uff1a<code>sp</code>\uff08Stack Pointer\uff09","text":"<p>\u5728 RISC-V \u4e2d\uff0c<code>x2</code> \u5bc4\u5b58\u5668\u88ab\u89c4\u5b9a\u4e3a <code>sp</code> (stack pointer)\uff0c\u5373\u201c\u6808\u6307\u9488\u201d\u3002</p> <ul> <li><code>sp</code> \u59cb\u7ec8\u6307\u5411\u5f53\u524d\u6808\u9876\uff08\u6700\u4f4e\u5730\u5740\uff09</li> <li>\u6808\u662f\u5411\u4e0b\u751f\u957f\u7684\uff08\u5373\u5730\u5740\u51cf\u5c0f\u7684\u65b9\u5411\uff09</li> <li>\u6bcf\u6b21\u51fd\u6570\u8c03\u7528\u65f6\uff0c<code>sp</code> \u5411\u4e0b\u79fb\u52a8\u5206\u914d\u7a7a\u95f4\uff1b</li> <li>\u8fd4\u56de\u65f6\uff0c<code>sp</code> \u5411\u4e0a\u6062\u590d\u539f\u72b6\u3002</li> </ul>"},{"location":"CO/cs61c/#_14","title":"\ud83e\uddf1 \u4e09\u3001\u51fd\u6570\u8c03\u7528\u65f6\u6808\u4e0a\u4fdd\u5b58\u4ec0\u4e48\uff1f","text":"<p>\u901a\u5e38\u4fdd\u5b58\u4e09\u7c7b\u4fe1\u606f\uff1a</p> \u5185\u5bb9 \u8bf4\u660e \u7531\u8c01\u8d1f\u8d23 \u8fd4\u56de\u5730\u5740\uff08<code>ra</code>\uff09 \u56de\u5230\u4e0a\u4e00\u4e2a\u51fd\u6570\u7684\u6307\u4ee4\u4f4d\u7f6e \u88ab\u8c03\u7528\u8005\u4fdd\u5b58 \u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668 \u9632\u6b62\u88ab\u8986\u76d6\uff08\u5982 <code>t0-t6</code>\uff09 \u8c03\u7528\u8005\u4fdd\u5b58 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668 \u5728\u51fd\u6570\u8fd4\u56de\u524d\u5fc5\u987b\u6062\u590d\uff08\u5982 <code>s0-s11</code>\uff09 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58 \u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4 \u51fd\u6570\u5185\u90e8\u4f7f\u7528 \u88ab\u8c03\u7528\u8005\u5206\u914d"},{"location":"CO/cs61c/#risc-v","title":"RISC-V \u4e2d\u7684\u5bc4\u5b58\u5668\u5206\u7c7b    \u5bc4\u5b58\u5668 \u522b\u540d \u8bf4\u660e \u4fdd\u5b58\u7ea6\u5b9a     x0 zero \u6052\u4e3a 0 \u4e0d\u53ef\u4fee\u6539   x1 ra return address\uff08\u8fd4\u56de\u5730\u5740\uff09 \u8c03\u7528\u8005\u4fdd\u5b58   x2 sp stack pointer\uff08\u6808\u6307\u9488\uff09 \u5168\u5c40\u552f\u4e00   x3 gp global pointer \u7a0b\u5e8f\u521d\u59cb\u5316\u65f6\u8bbe\u5b9a   x4 tp thread pointer \u7ebf\u7a0b\u5c40\u90e8   x5\u2013x7 t0\u2013t2 \u4e34\u65f6\u5bc4\u5b58\u5668 \u8c03\u7528\u8005\u4fdd\u5b58   x8 s0/fp \u4fdd\u5b58\u5bc4\u5b58\u5668 0 / frame pointer \u88ab\u8c03\u7528\u8005\u4fdd\u5b58   x9 s1 \u4fdd\u5b58\u5bc4\u5b58\u5668 1 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58   x10\u2013x17 a0\u2013a7 \u53c2\u6570/\u8fd4\u56de\u503c\u5bc4\u5b58\u5668 \u8c03\u7528\u8005\u4fdd\u5b58   x18\u2013x27 s2\u2013s11 \u4fdd\u5b58\u5bc4\u5b58\u5668 2\u201311 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58   x28\u2013x31 t3\u2013t6 \u4e34\u65f6\u5bc4\u5b58\u5668 \u8c03\u7528\u8005\u4fdd\u5b58    <p>\u975e\u5e38\u597d\u7684\u95ee\u9898 \ud83d\udc4f\uff0c\u8fd9\u662f\u7406\u89e3 RISC-V \u51fd\u6570\u8c03\u7528\u673a\u5236\uff08calling convention\uff09 \u7684\u6838\u5fc3\uff01 \u6211\u4eec\u6765\u5b8c\u6574\u8bb2\u6e05\u695a\uff1a\u51fd\u6570\u8c03\u7528\u65f6\u5230\u5e95\u6d89\u53ca\u54ea\u4e9b\u5bc4\u5b58\u5668\u3001\u5b83\u4eec\u7684\u4f5c\u7528\u3001\u7531\u8c01\u4fdd\u5b58\u3002</p>  <p>\u5728 RISC-V \u67b6\u6784\u4e2d\uff0c\u51fd\u6570\u8c03\u7528\u5927\u81f4\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a</p> <ol> <li>\u8c03\u7528\u524d\uff08caller\uff09\uff1a\u51c6\u5907\u53c2\u6570\u3001\u4fdd\u5b58\u73b0\u573a</li> <li>\u8c03\u7528\u4e2d\uff08callee\uff09\uff1a\u6267\u884c\u51fd\u6570\u3001\u4fdd\u5b58\u5fc5\u8981\u5bc4\u5b58\u5668</li> <li>\u8fd4\u56de\u65f6\uff1a\u6062\u590d\u73b0\u573a\u3001\u8fd4\u56de\u8c03\u7528\u70b9</li> </ol> <p>\u6574\u4e2a\u8fc7\u7a0b\u4f1a\u6d89\u53ca\u4ee5\u4e0b\u51e0\u7c7b\u5bc4\u5b58\u5668\ud83d\udc47</p>    \u7c7b\u522b \u540d\u79f0 \u4f5c\u7528 \u4fdd\u5b58\u8d23\u4efb     \ud83d\udce6 \u6808\u4e0e\u8fd4\u56de <code>sp</code>, <code>ra</code> \u6808\u6307\u9488 &amp; \u8fd4\u56de\u5730\u5740 <code>sp</code> \u5168\u5c40\u552f\u4e00\uff0c<code>ra</code> \u901a\u5e38\u7531\u88ab\u8c03\u7528\u8005\u4fdd\u5b58   \ud83d\udde3 \u53c2\u6570/\u8fd4\u56de\u503c <code>a0\u2013a7</code> \u524d 8 \u4e2a\u53c2\u6570 &amp; \u8fd4\u56de\u503c \u8c03\u7528\u8005\u4fdd\u5b58   \ud83e\uddee \u4e34\u65f6\u5bc4\u5b58\u5668 <code>t0\u2013t6</code> \u4e34\u65f6\u8ba1\u7b97 \u8c03\u7528\u8005\u4fdd\u5b58   \ud83d\udcbe \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668 <code>s0\u2013s11</code> \u4fdd\u6301\u8de8\u51fd\u6570\u7684\u6570\u636e \u88ab\u8c03\u7528\u8005\u4fdd\u5b58   \ud83d\udccd \u7279\u6b8a\u6307\u9488 <code>gp</code>, <code>tp</code> \u5168\u5c40/\u7ebf\u7a0b\u6307\u9488 \u521d\u59cb\u5316\u540e\u4e0d\u52a8   \u2699\ufe0f \u96f6\u5bc4\u5b58\u5668 <code>zero (x0)</code> \u6052\u4e3a 0 \u4e0d\u53ef\u4fee\u6539","text":""},{"location":"CO/cs61c/#_15","title":"\ud83e\udde9 \u4e09\u3001\u5bc4\u5b58\u5668\u7528\u9014\u89e3\u6790","text":""},{"location":"CO/cs61c/#1-a0a7","title":"1\ufe0f\u20e3 \u53c2\u6570\u4f20\u9012\uff08a0\u2013a7\uff09","text":"<ul> <li>\u8c03\u7528\u8005\u7528 <code>a0\u2013a7</code> \u653e\u524d 8 \u4e2a\u53c2\u6570\u3002</li> <li>\u8fd4\u56de\u503c\u4e5f\u653e\u5728 <code>a0</code>\uff08\u7b2c\u4e8c\u4e2a\u8fd4\u56de\u503c\u5728 <code>a1</code>\uff09\u3002</li> </ul> <p>\ud83d\udc49 \u8d85\u8fc7 8 \u4e2a\u53c2\u6570\u7684\u60c5\u51b5\uff1a \u5269\u4f59\u7684\u53c2\u6570\u4f1a\u5b58\u5230 \u6808\uff08stack\uff09 \u91cc\uff0c\u7531\u88ab\u8c03\u7528\u8005\u4ece\u6808\u4e2d\u53d6\u3002</p>"},{"location":"CO/cs61c/#2-ra","title":"2\ufe0f\u20e3 \u8fd4\u56de\u5730\u5740\uff08ra\uff09","text":"<ul> <li><code>jal</code> \u6307\u4ee4\u4f1a\u628a\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u5b58\u5165 <code>ra</code>\u3002</li> <li>\u8fd4\u56de\u65f6\u6267\u884c <code>jr ra</code> \u6216 <code>ret</code>\uff08\u5176\u5b9e\u5c31\u662f <code>jalr x0, 0(ra)</code>\uff09\u3002</li> </ul> <pre><code>jal ra, func   # \u8c03\u7528\u51fd\u6570\uff0cra = \u4e0b\u4e00\u6761\u6307\u4ee4\u5730\u5740\n...\nfunc:\n    ret        # \u8df3\u56de ra\n</code></pre>"},{"location":"CO/cs61c/#3-sp","title":"3\ufe0f\u20e3 \u6808\u6307\u9488\uff08sp\uff09","text":"<ul> <li>\u6bcf\u4e2a\u51fd\u6570\u90fd\u4f1a\u5206\u914d\u81ea\u5df1\u7684\u6808\u5e27\u3002</li> <li>\u6808\u5e27\u4fdd\u5b58\u5c40\u90e8\u53d8\u91cf\u3001\u5bc4\u5b58\u5668\u5907\u4efd\u7b49\u3002</li> </ul> <pre><code>func:\n    addi sp, sp, -16   # \u5206\u914d16\u5b57\u8282\u6808\u7a7a\u95f4\n    sw ra, 12(sp)      # \u4fdd\u5b58\u8fd4\u56de\u5730\u5740\n    sw s0, 8(sp)       # \u4fdd\u5b58 s0\n    ...\n    lw ra, 12(sp)      # \u6062\u590d ra\n    lw s0, 8(sp)       # \u6062\u590d s0\n    addi sp, sp, 16\n    ret\n</code></pre>"},{"location":"CO/cs61c/#4-s0s11","title":"4\ufe0f\u20e3 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff08s0\u2013s11\uff09","text":"<ul> <li>\u8c03\u7528\u8005\u5e0c\u671b\u8fd9\u4e9b\u5bc4\u5b58\u5668\u5728\u51fd\u6570\u8c03\u7528\u540e\u503c\u4e0d\u53d8\u3002</li> <li>\u6240\u4ee5\u5982\u679c\u51fd\u6570\u91cc\u8981\u7528\u5b83\u4eec\uff0c\u5c31\u8981\u5148\u4fdd\u5b58\u5230\u6808\u4e0a\uff0c\u518d\u6062\u590d\u56de\u6765\u3002</li> </ul>"},{"location":"CO/cs61c/#5-t0t6-a0a7-ra","title":"5\ufe0f\u20e3 \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff08t0\u2013t6, a0\u2013a7, ra\uff09","text":"<ul> <li>\u5982\u679c\u8c03\u7528\u8005\u5728\u8c03\u7528\u524d\u8fd8\u9700\u8981\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\uff0c   \u5b83\u81ea\u5df1\u8d1f\u8d23\u628a\u503c\u5b58\u5230\u6808\u4e0a\u3002</li> </ul> <pre><code>main:\n    addi t0, zero, 10\n    sw t0, 0(sp)       # \u8c03\u7528\u524d\u4fdd\u5b58\n    jal func\n    lw t0, 0(sp)       # \u8c03\u7528\u540e\u6062\u590d\n</code></pre>"},{"location":"CO/cs61c/#_16","title":"\u2705 \u603b\u7ed3\u4e00\u53e5\u8bdd","text":"<p>\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u901a\u5e38\u4f1a\u6d89\u53ca\uff1a</p> <ul> <li>a0\u2013a7\uff08\u53c2\u6570/\u8fd4\u56de\u503c\uff09</li> <li>ra\uff08\u8fd4\u56de\u5730\u5740\uff09</li> <li>sp\uff08\u6808\u6307\u9488\uff09</li> <li>s0\u2013s11\uff08\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\uff09</li> <li>t0\u2013t6\uff08\u4e34\u65f6\u5bc4\u5b58\u5668\uff09</li> </ul> <p>\ud83d\udcd8 \u8c03\u7528\u8005\u4fdd\u5b58\u4e34\u65f6\u72b6\u6001\uff0c \ud83d\udcd7 \u88ab\u8c03\u7528\u8005\u4fdd\u8bc1\u7a33\u5b9a\u72b6\u6001\uff0c \ud83d\udcd9 \u6808\uff08sp\uff09\u662f\u5b83\u4eec\u7684\u7f13\u51b2\u533a\u3002   \u5bc4\u5b58\u5668\u7684\u4e24\u5927\u7c7b\u578b</p> \u5bc4\u5b58\u5668\u7c7b\u578b \u540d\u79f0\u8303\u56f4 \u4fdd\u5b58\u8005 \u7279\u70b9 Caller-saved\uff08\u8c03\u7528\u8005\u4fdd\u5b58\uff09 <code>t0\u2013t6</code>, <code>a0\u2013a7</code>, <code>ra</code> \u8c03\u7528\u8005 \u7528\u5b8c\u5c31\u6254\uff0c\u4e0d\u9700\u8981\u6062\u590d Callee-saved\uff08\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\uff09 <code>s0\u2013s11</code> \u88ab\u8c03\u7528\u8005 \u8c03\u7528\u7ed3\u675f\u524d\u5fc5\u987b\u6062\u590d\u539f\u503c <p>\u4e24\u79cd\u5bc4\u5b58\u5668\u4fdd\u5b58\u6a21\u578b\u7684\u5bf9\u6bd4</p> \u7c7b\u578b \u8c01\u8d1f\u8d23\u4fdd\u5b58 \u4fdd\u5b58\u9891\u7387 \u4f7f\u7528\u573a\u666f t0\u2013t6\uff08caller-saved\uff09 \u8c03\u7528\u8005 \u53ea\u6709\u5728\u503c\u6709\u7528\u65f6\u624d\u4fdd\u5b58 \u4e34\u65f6\u8ba1\u7b97\u7ed3\u679c s0\u2013s11\uff08callee-saved\uff09 \u88ab\u8c03\u7528\u8005 \u6bcf\u4e2a\u51fd\u6570\u90fd\u5fc5\u987b\u4fdd\u5b58/\u6062\u590d\uff08\u5982\u679c\u7528\u4e86\uff09 \u957f\u671f\u5c40\u90e8\u53d8\u91cf <p>\u51fd\u6570\u8c03\u7528\u7684\u5e8f\u8a00\u548c\u7ed3\u5c3e\uff1a</p> <pre><code>int  Leaf\n    (int g, int h, int i, int j)\n{\n    int f;\n    f = (g + h) - (i + j);\n    return f;\n}\n</code></pre> <pre><code>Leaf:\naddi sp sp -8  #\u5e8f\u8a00\nsw s1, 4(sp)\nsw s0, 0(sp)\n\n\nadd s0,a0,a1\nadd s1,a2,a3\nsub a0,s0,s1\n\nlw s0,0(sp)  #\u7ed3\u5c3e\nlw s1\uff0c4(sp)\naddi sp.sp,8\njr ra\n</code></pre>"},{"location":"CO/cs61c/#abiapplication-binary-interface","title":"ABI\uff08Application Binary Interface\uff0c\u5e94\u7528\u4e8c\u8fdb\u5236\u63a5\u53e3\uff09 <p>\u89c4\u5b9a\u54ea\u4e9b\u5bc4\u5b58\u5668\u4f20\u53c2\u6570\uff1b</p> <p>\u54ea\u4e9b\u5bc4\u5b58\u5668\u8981\u88ab\u4fdd\u5b58\uff1b</p> <p>\u6808\u5e27\u600e\u4e48\u7ec4\u7ec7\uff1b</p> <p>\u8fd4\u56de\u503c\u653e\u54ea\uff1b</p> <p>\u8c03\u7528\u987a\u5e8f\u548c\u8fd4\u56de\u987a\u5e8f\u7b49</p> <p>RISC-V \u7684 ABI \u89c4\u5b9a\u5bc4\u5b58\u5668\u804c\u8d23\u5206\u660e\uff1a | \u7c7b\u578b         | \u540d\u79f0     | \u8c03\u7528\u7ea6\u5b9a       | \u7528\u9014 | | ---------- | ------ | ---------- | -- | | a0\u2013a7  | \u8c03\u7528\u8005\u4fdd\u5b58  | \u53c2\u6570 &amp; \u8fd4\u56de\u503c   |    | | t0\u2013t6  | \u8c03\u7528\u8005\u4fdd\u5b58  | \u4e34\u65f6\u53d8\u91cf\uff08\u4e0d\u7528\u4fdd\u5b58\uff09 |    | | s0\u2013s11 | \u88ab\u8c03\u7528\u8005\u4fdd\u5b58 | \u957f\u671f\u53d8\u91cf\uff08\u5fc5\u987b\u4fdd\u5b58\uff09 |    | | sp, ra | \u7279\u6b8a     | \u6808\u9876\u3001\u8fd4\u56de\u5730\u5740    |    |</p>","text":""},{"location":"CO/cs61c/#gp-global-pointer","title":"gp\uff1a Global Pointer\uff08\u5168\u5c40\u6307\u9488\uff09 <p>\u4e5f\u5c31\u662f\uff1a\u5168\u5c40\u6570\u636e\u533a\u7684\u57fa\u5730\u5740\u5bc4\u5b58\u5668\u3002</p> <p>\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\uff08\u5373 .data\u3001.bss \u6bb5\uff09\u5b58\u653e\u5728\u5185\u5b58\u7684\u4e00\u7247\u533a\u57df\u4e2d\u3002</p> <p>\u7f16\u8bd1\u5668\u4f1a\uff1a</p> <p>\u5728\u7a0b\u5e8f\u52a0\u8f7d\u65f6\uff0c\u628a\u4e00\u4e2a\u201c\u5168\u5c40\u6570\u636e\u533a\u201d\u7684\u57fa\u5730\u5740\uff08\u901a\u5e38\u662f\u4e2d\u95f4\u504f\u79fb\uff09\u653e\u8fdb gp\uff1b</p> <p>\u4ee5\u540e\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\u65f6\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 gp + offset \u7684\u5f62\u5f0f\u5feb\u901f\u5b9a\u4f4d\u3002</p>","text":""},{"location":"CO/cs61c/#memory","title":"Memory","text":""},{"location":"CO/cs61c/#instructions-represent","title":"Instructions represent","text":""},{"location":"CO/cs61c/#_17","title":"\u673a\u5668\u8bed\u8a00","text":""},{"location":"CO/cs61c/#r-format","title":"R-format(\u7b97\u6570\u4e0e\u903b\u8f91)","text":"<p>R\u578b\u64cd\u4f5c\u7801\u90fd\u4e00\u6837  0110011</p> <p>\u4e0d\u540c\u7684\u6307\u4ee4\u5728 funct3\u548c7 \uff0810\u4f4d\uff09</p> <p></p> <p></p> <p>\u4e00\u4e2a\u4f8b\u5b50</p> <p></p> <p>\u6240\u6709R-format </p> <p>sll \u903b\u8f91\u5de6\u79fb</p> <p>slt \u5c0f\u4e8e</p> <p>sltu  \u5c0f\u4e8e\uff08\u65e0\u7b26\u53f7\u7248\uff09</p> <p>sra \u903b\u8f91\u53f3\u79fb</p> <p>0100000  \u8fd9\u91cc1\u662f\u7b26\u53f7\u6269\u5c55</p>"},{"location":"CO/cs61c/#i-formatimm","title":"I-format\uff08\u7acb\u5373\u6570imm\uff09","text":"<p>add rd,rs1,rs2</p> <p>add rd,rs1,imm  12\u4f4d\u7acb\u5373\u6570</p> <p>-2048\u5230+2047  </p> <p>\u56e0\u4e3ars1\u7684\u503c\u662f32\u4f4d \u6240\u4ee5\u7acb\u5373\u6570\u8981\u7b26\u53f7\u4f4d\u6269\u5c55\u523032\u4f4d  \u6ca1\u6709subi \u7528addi</p> <p>funct3\u4e00\u81f4</p> <p>\u5de6\u53f3\u79fb  \u79fb\u4f4d\u91cf\u662f5\u4f4d</p>"},{"location":"CO/cs61c/#load","title":"Load","text":"<p>\u548cimm\u5dee\u4e0d\u591a  funct2\u662f\u52a0\u8f7d\u7684\u7c7b\u578b</p> <p> \u4f8b\u5b50\uff1a </p> <p> lb lh\u90fd\u653e\u5728\u76ee\u6807\u5bc4\u5b58\u5668\u7684\u5730\u4f4d \u7136\u540e\u8fdb\u884c\u7b26\u53f7\u6269\u5c55</p> <p>lbu\u548clhu\u4e0d\u8fdb\u884c\u7b26\u53f7\u6269\u5c55</p> <p>lw\u4e0d\u9700\u8981\u7b26\u53f7\u6269\u5c55 \u4ed6\u5c31\u662f32\u4f4d</p> <p>\u4ece\u5bc4\u5b58\u5668 rs1 \u4e2d\u53d6\u51fa\u4e00\u4e2a\u57fa\u5740\uff0c\u52a0\u4e0a\u7acb\u5373\u6570 imm \u5f62\u6210\u5185\u5b58\u5730\u5740\uff0c \u4ece\u8be5\u5730\u5740\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5199\u5165\u5bc4\u5b58\u5668 rd</p>"},{"location":"CO/cs61c/#s-format","title":"S-format","text":"<p>\u5b58\u50a8\u6307\u4ee4  \u4f8b\u5b50\uff1a  \u5bc4\u5b58\u5668\u6307\u4ee4\u4f4d\u7f6e\u4e0d\u52a8 \u628a\u7acb\u5373\u6570\u62c6\u4e86</p> <p>\u5904\u7406\u5668\u8981\u5f88\u5feb\u627e\u5230\u5bc4\u5b58\u5668\u4f4d\u7f6e</p> <p>\u5b57\u8282\uff08byte\uff09 8\u4f4d\uff08bit\uff09 </p> <p>\u534a\u5b57\uff08half word\uff0916\u4f4d\uff08bit\uff09  </p> <p>\u5b57\uff08word\uff0932\u4f4d\uff08bit\uff09</p> <p></p>"},{"location":"CO/cs61c/#b-format","title":"B-format","text":"<p>\u5206\u652f</p> <p>\u4ee3\u7801\u5728\u5185\u5b58\u91cc \u4e0d\u4e0e\u6570\u636e\u6df7\u7528</p> <p>\u7528PC\u63a7\u5236</p> <p>\u538b\u7f29\u6307\u4ee4\u683c\u5f0f\uff1a16\u4f4d</p> <p>16\u4f4d\u548c32\u4f4d\u6df7\u7528\uff0c\u56e0\u6b64risc-v\u51b3\u5b9a\u6309\u716716\u4f4d\u504f\u79fb\uff082\u4e2a\u5b57\u8282\uff09</p> <p>\u4f46\u662f\u6211\u4eec\u73b0\u5728\u53ea\u5b6632\u4f4d\u7684\u6307\u4ee4</p> <p></p> <p>\u4e0eS\u7c7b\u4f3c</p> <p></p> <p>\u8df3\u8f6c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d offset\u5c31\u662f\u7acb\u5373\u6570imm</p> <p>\u6240\u4ee5\u7acb\u5373\u6570\u5e94\u8be5\u662f\u5076\u6570</p> <p>imm[0] \u5373\u6700\u4f4e\u6709\u6548\u4f4d\u4e00\u5b9a\u662f0  \u50a8\u5b5812\u4f4d\u6765\u8868\u793a13\u4f4d\u7684\u504f\u79fb\u91cf</p> <p>\u4f8b\u5b50\uff1a</p> <p> offset\u76f4\u63a5\u7b97\u5c31\u597d  offset=0\u5c31\u662f\u81ea\u8eab</p> <p></p> <p>\u603b\u662f\u6269\u5c55inst[31] \u5373imm\u7684\u6700\u9ad8\u4f4d\uff08\u7b26\u53f7\u4f4d\uff09</p> <p></p> <p></p>"},{"location":"CO/cs61c/#_18","title":"\u957f\u7acb\u5373\u6570","text":""},{"location":"CO/cs61c/#lui","title":"Lui","text":"<p>\u4f46\u662faddi\u4f1a\u7b26\u53f7\u6269\u5c55</p> <p> </p> <p>\u4f2a\u6307\u4ee4 li x10\uff0c imm</p>"},{"location":"CO/cs61c/#auipc","title":"AUIPC","text":""},{"location":"CO/cs61c/#j-format","title":"J-format","text":"<p>\u8df3\u8f6c </p> <p>\u8fd8\u662f\u5076\u6570 \u548c\u5206\u652f\u4e00\u6837</p> <p>20\u4f4d\u6765\u8986\u76d621\u4f4d</p> <p></p> <p> </p> <p>\u6700\u4f4e\u6709\u6548\u4f4d\u4e0d\u4e00\u5b9a\u662f0  \uff08\u6269\u5c55\u7b26\u53f7\u4f4d\uff09\u53ef\u4ee5\u8df3\u8f6c\u5230\u7edd\u5bf9\u4f4d\u7f6e</p> <p></p>"},{"location":"CO/cs61c/#_19","title":"\u89e3\u91ca\u548c\u7ffb\u8bd1/\u7f16\u8bd1","text":""},{"location":"CO/cs61c/#interpretation","title":"Interpretation","text":"<p>\u9010\u53e5\u8bfb\u53d6\u6e90\u4ee3\u7801 \u2192 \u9010\u53e5\u5206\u6790 \u2192 \u9010\u53e5\u6267\u884c</p> <p>\u89e3\u91ca\u5668\uff08interpreter\uff09\u4e0d\u4f1a\u628a\u6574\u4e2a\u7a0b\u5e8f\u4e00\u6b21\u6027\u7ffb\u8bd1\u6210\u673a\u5668\u7801\uff0c\u800c\u662f\u8fb9\u8bfb\u8fb9\u6267\u884c\u3002(\u52a8\u6001\u6267\u884c)</p> <p>\u4e5f\u4f1a\u89e3\u91ca\u673a\u5668\u7801</p> <p>\u56e0\u4e3a\u4e0d\u540cisa\u9002\u914d</p> <p>\u89e3\u91ca\u5668\u672c\u8eab\u4e0d\u4f9d\u8d56\u76ee\u6807\u673a\u5668 CPU \u7684\u6307\u4ee4\u96c6\uff0c\u800c\u662f\u4f9d\u8d56\u5b83\u81ea\u5df1\u5b9a\u4e49\u7684\u4e00\u5957\u201c\u865a\u62df\u6307\u4ee4\u96c6</p> <p>python\u4ee3\u7801 -&gt; \u8bcd\u6cd5\u5206\u6790 \u628a\u5b57\u7b26\u5e8f\u5217\u5206\u6210\u5355\u8bcd\uff08token\uff09</p> <p>-&gt;  \u8bed\u6cd5\u5206\u6790 \u6784\u5efa\u8bed\u6cd5\u6811\uff08AST\uff09</p> <p>-&gt; \u751f\u6210\u4e2d\u95f4\u5b57\u8282\u7801 \u89e3\u91ca\u5668\u4e0d\u4f1a\u76f4\u63a5\u751f\u6210\u673a\u5668\u7801\uff0c\u800c\u662f\u751f\u6210\u865a\u62df\u673a\u5b57\u8282\u7801</p> <p>\u89e3\u91ca\u5668\u672c\u8eab\uff08\u6bd4\u5982 CPython \u7684 python \u53ef\u6267\u884c\u6587\u4ef6\uff09\u662f\u7528 C \u5199\u7684\uff0c\u5b83\u5728\u53d1\u5e03/\u5b89\u88c5\u65f6\u5df2\u7ecf\u88ab\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5\u6210\u673a\u5668\u7801\u3002\u8fd9\u4e00\u6b65\u53ea\u505a\u4e00\u6b21\uff08\u5728\u4f60\u8fd0\u884c\u89e3\u91ca\u5668\u4e4b\u524d\u6216\u5b89\u88c5\u65f6\uff09\u3002</p> <p>-&gt; \u865a\u62df\u6307\u4ee4\uff08bytecode\uff09 \u4e0d\u662f\u5355\u72ec\u88ab\u7f16\u8bd1\u6210\u673a\u5668\u7801\u518d\u8fd0\u884c\u7684\uff1b\u5b83\u4eec\u88ab\u89e3\u91ca\u5668\u8bfb\u5165\uff0c\u89e3\u91ca\u5668\u7528\u5df2\u7f16\u8bd1\u597d\u7684\u673a\u5668\u7801\u201c\u6267\u884c\u201d\u8fd9\u4e9b\u865a\u62df\u6307\u4ee4\u7684\u8bed\u4e49\u3002</p>"},{"location":"CO/cs61c/#transformation","title":"transformation","text":"<p>Venus\uff01</p> <p></p> <p>\u52a0\u8f7d\u5668\uff1a\u628a\u7a0b\u5e8f\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d \u5e76\u8bbe\u7f6e\u4ed6\u9700\u8981\u7684\u4e1c\u897f \u7136\u540e\u8fd0\u884c </p>"},{"location":"CO/cs61c/#_20","title":"\u7f16\u8bd1\u5668","text":"<p>.c -&gt; .s  c\u8bed\u8a00\u8f6c\u6c47\u7f16  \u4f2a\u6307\u4ee4\u53ef\u884c\uff08\u7531\u6c47\u7f16\u5668\u4f18\u5316\uff09</p>"},{"location":"CO/cs61c/#_21","title":"\u6c47\u7f16\u5668","text":"<p>\u662f\u7684\uff0c\u57fa\u672c\u4e0a\u4f60\u770b\u5230\u7684\u8fd9\u4e9b\u6307\u4ee4\u90fd\u662f \u7f16\u8bd1\u5668\u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801\u91cc\u7684\uff0c\u5c24\u5176\u662f\u50cf GCC \u8fd9\u79cd\u751f\u6210\u7684 GNU \u6c47\u7f16\uff08GAS\uff09\u8bed\u6cd5 \u7684\u6c47\u7f16\u6587\u4ef6\u3002</p> <p>\u6211\u5e2e\u4f60\u68b3\u7406\u4e00\u4e0b\u5b83\u4eec\u5728 C/C++ \u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u7684\u4f4d\u7f6e\u548c\u4f5c\u7528\uff1a</p>"},{"location":"CO/cs61c/#1_1","title":"1\ufe0f\u20e3 \u7f16\u8bd1\u6d41\u7a0b\u56de\u987e","text":"<ol> <li> <p>\u6e90\u4ee3\u7801 (<code>.c</code> / <code>.cpp</code>) \u2192 \u9884\u5904\u7406 \u2192 \u7f16\u8bd1 \u2192 \u6c47\u7f16 \u2192 \u76ee\u6807\u6587\u4ef6 (<code>.o</code>) \u2192 \u94fe\u63a5 \u2192 \u53ef\u6267\u884c\u6587\u4ef6</p> </li> <li> <p>\u5728 \u7f16\u8bd1\u751f\u6210\u7684\u6c47\u7f16\u6587\u4ef6\uff08\u7528 <code>gcc -S foo.c</code> \u53ef\u4ee5\u770b\u5230 <code>.s</code> \u6587\u4ef6\uff09\u91cc\uff0c\u5e38\u89c1\u7684\u6307\u4ee4\u6709\uff1a</p> </li> <li> <p><code>.text</code>\uff1a\u653e\u7f16\u8bd1\u51fa\u6765\u7684 \u51fd\u6570\u673a\u5668\u7801</p> </li> <li><code>.data</code>\uff1a\u653e \u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40/\u9759\u6001\u53d8\u91cf</li> <li><code>.bss</code>\uff1a\u653e \u672a\u521d\u59cb\u5316\u7684\u5168\u5c40/\u9759\u6001\u53d8\u91cf</li> <li><code>.global</code>\uff1a\u6807\u8bb0\u51fd\u6570\u6216\u53d8\u91cf \u53ef\u88ab\u5176\u4ed6\u76ee\u6807\u6587\u4ef6\u8bbf\u95ee</li> <li><code>.string</code> / <code>.asciz</code>\uff1a\u653e \u5b57\u7b26\u4e32\u5b57\u9762\u91cf</li> <li><code>.word</code> / <code>.long</code>\uff1a\u653e \u6574\u6570\u5e38\u91cf\u6216\u521d\u59cb\u5316\u503c</li> </ol>"},{"location":"CO/cs61c/#2_1","title":"2\ufe0f\u20e3 \u4e3e\u4f8b","text":"<p>\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u7b80\u5355\u7684 C \u4ee3\u7801\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n\nint g = 42;         // \u5df2\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\nint h;              // \u672a\u521d\u59cb\u5316\u5168\u5c40\u53d8\u91cf\n\nint main() {\n    const char* s = \"Hello\";\n    return 0;\n}\n</code></pre> <p>\u7528 GCC \u751f\u6210\u6c47\u7f16 (<code>gcc -S main.c</code>) \u53ef\u80fd\u5f97\u5230\u7c7b\u4f3c\uff1a</p> <pre><code>    .data\ng:  .long 42           # g \u5b58\u653e\u5728 .data \u6bb5\n\n    .bss\nh:  .skip 4            # h \u5b58\u653e\u5728 .bss \u6bb5\n\n    .text\n    .global main\nmain:\n    push %rbp\n    mov %rsp, %rbp\n\n    lea .LC0(%rip), %rdi   # \u5b57\u7b26\u4e32\u5730\u5740\n    mov %eax, 0\n    pop %rbp\n    ret\n\n    .section .rodata\n.LC0:\n    .string \"Hello\"        # \u5b57\u7b26\u4e32\u5e38\u91cf\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff1a</p> <ul> <li><code>.data</code>\uff1a\u521d\u59cb\u5316\u53d8\u91cf <code>g</code></li> <li><code>.bss</code>\uff1a\u672a\u521d\u59cb\u5316\u53d8\u91cf <code>h</code></li> <li><code>.text</code>\uff1a\u51fd\u6570 <code>main</code> \u7684\u4ee3\u7801</li> <li><code>.global main</code>\uff1a\u4f7f <code>main</code> \u5168\u5c40\u53ef\u89c1</li> <li><code>.string</code>\uff1a\u5b57\u7b26\u4e32\u5b57\u9762\u91cf <code>\"Hello\"</code></li> </ul> <p>\u6240\u4ee5\u603b\u7ed3\uff1a</p> <p>\u4f60\u770b\u5230\u7684 <code>.text</code>\u3001<code>.data</code>\u3001<code>.bss</code>\u3001<code>.global</code>\u3001<code>.string</code>\u3001<code>.word</code>\uff0c\u90fd\u662f\u7f16\u8bd1\u5668\u628a C/C++ \u4ee3\u7801\u7ffb\u8bd1\u6210\u6c47\u7f16\u540e\u751f\u6210\u7684\u7b26\u53f7\u6216\u6307\u4ee4\uff0c\u6700\u7ec8\u4f1a\u88ab\u6c47\u7f16\u5668\u7ffb\u8bd1\u6210\u673a\u5668\u7801\u5b58\u5165\u53ef\u6267\u884c\u6587\u4ef6\u91cc\u3002</p> <p>-1 \u5728\u8865\u7801\u91cc\u5168\u662f1</p> <p></p> <p>la\uff08load address\uff09\u5176\u5b9e\u5c31\u662f\u628a\u4e00\u4e2a\u6807\u7b7e\u7684\u7edd\u5bf9\u5730\u5740\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668</p> <p>\u7b26\u53f7\u8868 </p> <p>\u91cd\u5b9a\u4f4d\u8868\uff1a </p> <p>\u975e\u5e38\u68d2\u7684\u95ee\u9898\ud83d\udc4f\uff0c\u8fd9\u5176\u5b9e\u662f\u6c47\u7f16\u5668\u548c\u94fe\u63a5\u5668\u7684\u6838\u5fc3\u673a\u5236\u2014\u2014 \u641e\u61c2\u201c\u7b26\u53f7\u8868\uff08Symbol Table\uff09\u201d\u548c\u201c\u91cd\u5b9a\u4f4d\u8868\uff08Relocation Table\uff09\u201d\uff0c\u4f60\u5c31\u771f\u6b63\u7406\u89e3\u6c47\u7f16\u5668\u548c\u94fe\u63a5\u5668\u662f\u600e\u4e48\u534f\u4f5c\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u4e86\u3002</p>"},{"location":"CO/cs61c/#symbol-table","title":"\ud83e\udde9 \u4e00\u3001\u7b26\u53f7\u8868\uff08Symbol Table\uff09","text":""},{"location":"CO/cs61c/#_22","title":"\ud83d\udcd6 \u5b9a\u4e49","text":"<p>\u7b26\u53f7\u8868\u662f\u6c47\u7f16\u5668\u5728\u6c47\u7f16\u65f6\u7ef4\u62a4\u7684\u4e00\u5f20\u201c\u7b26\u53f7\u2014\u5730\u5740\u6620\u5c04\u8868\u201d\u3002</p> <p>\u5b83\u8bb0\u5f55\u7a0b\u5e8f\u4e2d\u6240\u6709\u53ef\u88ab\u5f15\u7528\u7684\u7b26\u53f7\uff08symbol\uff09\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u5168\u5c40\u53d8\u91cf</li> <li>\u5c40\u90e8\u6807\u7b7e\uff08\u51fd\u6570\u3001\u5c40\u90e8\u8df3\u8f6c\u6807\u7b7e\uff09</li> <li>\u5916\u90e8\u5f15\u7528\uff08\u4f8b\u5982 <code>printf</code>\uff09</li> <li>\u5e38\u91cf\u3001\u5b57\u7b26\u4e32\u3001\u6bb5\u7b49\u4f4d\u7f6e\u7b26\u53f7</li> </ul>"},{"location":"CO/cs61c/#_23","title":"\ud83d\udcd8 \u7b26\u53f7\u8868\u7684\u5185\u5bb9\uff08\u6bcf\u4e2a\u7b26\u53f7\u7684\u6761\u76ee\uff09","text":"\u5b57\u6bb5 \u542b\u4e49 \u793a\u4f8b Name \u7b26\u53f7\u540d <code>main</code>, <code>msg</code>, <code>printf</code> Section \u7b26\u53f7\u6240\u5728\u6bb5 <code>.text</code>, <code>.data</code>, <code>.bss</code>, <code>UNDEF</code> Value \u7b26\u53f7\u5728\u8be5\u6bb5\u5185\u7684\u504f\u79fb <code>0x00000010</code> Size \u7b26\u53f7\u957f\u5ea6\uff08\u51fd\u6570\u6216\u53d8\u91cf\u5927\u5c0f\uff09 4, 32... Binding \u7b26\u53f7\u7684\u53ef\u89c1\u6027 <code>LOCAL</code>, <code>GLOBAL</code>, <code>EXTERN</code> Type \u7b26\u53f7\u7c7b\u578b <code>FUNC</code>, <code>OBJECT</code>, <code>NOTYPE</code>"},{"location":"CO/cs61c/#_24","title":"\ud83d\udcd7 \u793a\u4f8b\uff1a\u7b26\u53f7\u8868\uff08\u7b80\u5316\uff09","text":"<p>\u5047\u8bbe\u6e90\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>.data\nmsg: .asciz \"Hi\"\n\n.text\n.globl main\nmain:\n    la a0, msg\n    li a7, 4\n    ecall\n</code></pre> <p>\u6c47\u7f16\u540e\uff08\u672a\u94fe\u63a5\uff09\u7b26\u53f7\u8868\u53ef\u80fd\u957f\u8fd9\u6837\uff1a</p> Name Section Value Binding Type msg .data 0x0000 LOCAL OBJECT main .text 0x0000 GLOBAL FUNC a7 \u2014 \u2014 REGISTER \u2014 ecall \u2014 \u2014 INSTR \u2014"},{"location":"CO/cs61c/#relocation-table","title":"\u2699\ufe0f \u4e8c\u3001\u91cd\u5b9a\u4f4d\u8868\uff08Relocation Table\uff09","text":""},{"location":"CO/cs61c/#_25","title":"\ud83d\udcd6 \u5b9a\u4e49","text":"<p>\u5f53\u4e00\u6761\u6307\u4ee4\u4e2d\u5f15\u7528\u4e86\u4e00\u4e2a\u672a\u77e5\u5730\u5740\u7684\u7b26\u53f7\uff08\u4f8b\u5982\u5168\u5c40\u53d8\u91cf\u3001\u51fd\u6570\u3001\u5b57\u7b26\u4e32\u6807\u7b7e\u7b49\uff09\uff0c \u6c47\u7f16\u5668\u6682\u65f6\u65e0\u6cd5\u786e\u5b9a\u5b83\u7684\u7edd\u5bf9\u5730\u5740\uff0c\u5c31\u5fc5\u987b\u5728\u8f93\u51fa\u6587\u4ef6\u91cc\u7559\u4e2a\u201c\u5751\u201d\uff0c\u544a\u8bc9\u94fe\u63a5\u5668\uff1a</p> <p>\u201c\u8fd9\u91cc\u6709\u4e2a\u8fd8\u6ca1\u586b\u7684\u5730\u5740\uff0c\u8bf7\u94fe\u63a5\u65f6\u5e2e\u6211\u8865\u4e0a\uff01\u201d</p> <p>\u8fd9\u5f20\u201c\u9700\u8981\u8865\u5751\u201d\u7684\u8bb0\u5f55\u8868\uff0c\u5c31\u662f\u91cd\u5b9a\u4f4d\u8868\uff08Relocation Table\uff09\u3002</p>"},{"location":"CO/cs61c/#_26","title":"\ud83d\udcd8 \u6bcf\u4e2a\u91cd\u5b9a\u4f4d\u9879\u5305\u542b\u7684\u5185\u5bb9","text":"\u5b57\u6bb5 \u542b\u4e49 \u793a\u4f8b Offset \u54ea\u4e2a\u4f4d\u7f6e\u9700\u8981\u4fee\u6539 <code>.text</code> \u6bb5\u5185\u7684\u504f\u79fb Symbol \u5173\u8054\u7684\u7b26\u53f7 \u6bd4\u5982 <code>msg</code> Type \u91cd\u5b9a\u4f4d\u7c7b\u578b R_RISCV_HI20 / R_RISCV_LO12_I Addend \u9644\u52a0\u503c\uff08\u5e38\u6570\u504f\u79fb\uff09 \u4e00\u822c\u4e3a0"},{"location":"CO/cs61c/#la-a0-msg","title":"\ud83d\udcd7 \u4e3e\u4f8b\uff1a<code>la a0, msg</code>","text":"<p>\u8fd9\u6761\u4f2a\u6307\u4ee4\u5176\u5b9e\u4f1a\u5c55\u5f00\u4e3a\u4e24\u6761\u6307\u4ee4\uff1a</p> <pre><code>lui a0, %hi(msg)\naddi a0, a0, %lo(msg)\n</code></pre> <p>\u6c47\u7f16\u5668\u6b64\u65f6\u5e76\u4e0d\u77e5\u9053 <code>msg</code> \u5728\u5185\u5b58\u4e2d\u7684\u771f\u5b9e\u5730\u5740\uff0c\u53ea\u77e5\u9053\u5b83\u5c5e\u4e8e <code>.data</code> \u6bb5\u3002 \u4e8e\u662f\u6c47\u7f16\u5668\u4f1a\u751f\u6210\u4e24\u4e2a\u91cd\u5b9a\u4f4d\u9879\uff1a</p> \u6bb5 \u504f\u79fb \u7b26\u53f7 \u7c7b\u578b \u63cf\u8ff0 .text 0x0004 msg R_RISCV_HI20 \u9700\u8981\u628a <code>%hi(msg)</code> \u586b\u8fdb\u53bb .text 0x0008 msg R_RISCV_LO12_I \u9700\u8981\u628a <code>%lo(msg)</code> \u586b\u8fdb\u53bb <p>\u5f53\u94fe\u63a5\u5668\u628a <code>.text</code> \u6bb5\u548c <code>.data</code> \u6bb5\u62fc\u5728\u4e00\u8d77\u65f6\uff0c\u5b83\u4f1a\uff1a</p> <ul> <li>\u8ba1\u7b97\u51fa <code>msg</code> \u7684\u5b9e\u9645\u5730\u5740\uff08\u6bd4\u5982 <code>0x10010000</code>\uff09</li> <li>\u628a <code>0x10010000</code> \u7684\u9ad8 20 \u4f4d\u586b\u5165 <code>lui</code></li> <li>\u628a\u4f4e 12 \u4f4d\u586b\u5165 <code>addi</code></li> </ul> <p>\u8fd9\u6837\u7a0b\u5e8f\u91cc\u7684 <code>la a0, msg</code> \u6700\u7ec8\u5c31\u53d8\u6210\u4e86\u6709\u6548\u7684\u52a0\u8f7d\u5730\u5740\u6307\u4ee4\u3002</p>"},{"location":"CO/cs61c/#_27","title":"\ud83e\uddf1 \u4e09\u3001\u7b26\u53f7\u8868\u4e0e\u91cd\u5b9a\u4f4d\u8868\u7684\u5173\u7cfb","text":"<p>\u8fd9\u4e24\u5f20\u8868\u662f\u201c\u914d\u5bf9\u4f7f\u7528\u201d\u7684\uff1a</p> \u7b26\u53f7\u8868 \u91cd\u5b9a\u4f4d\u8868 \u5b9a\u4e49\u4e86\u6bcf\u4e2a\u7b26\u53f7\u7684\u903b\u8f91\u4f4d\u7f6e \u6307\u51fa\u7a0b\u5e8f\u91cc\u54ea\u4e9b\u5730\u65b9\u7528\u5230\u4e86\u7b26\u53f7 \u76f8\u5f53\u4e8e\u5b57\u5178 \u76f8\u5f53\u4e8e\u201c\u5f15\u7528\u7d22\u5f15\u201d \u7531\u6c47\u7f16\u5668\u751f\u6210\uff0c\u94fe\u63a5\u5668\u4f7f\u7528 \u7531\u6c47\u7f16\u5668\u751f\u6210\uff0c\u94fe\u63a5\u5668\u4fee\u6539 <p>\u94fe\u63a5\u5668\u94fe\u63a5\u65f6\uff1a</p> <ol> <li>\u67e5\u627e\u91cd\u5b9a\u4f4d\u8868 \u2192 \u627e\u51fa\u9700\u8981\u4fee\u6539\u7684\u5730\u65b9</li> <li>\u5728\u7b26\u53f7\u8868\u4e2d\u67e5\u5230\u8be5\u7b26\u53f7\u7684\u771f\u5b9e\u5730\u5740</li> <li>\u8ba1\u7b97\u504f\u79fb \u2192 \u56de\u5199\u673a\u5668\u7801</li> </ol>"},{"location":"CO/cs61c/#_28","title":"\ud83e\udde0 \u56db\u3001\u76f4\u89c2\u7406\u89e3","text":"<p>\u53ef\u4ee5\u8fd9\u6837\u60f3\u8c61\uff1a</p> \u89d2\u8272 \u6bd4\u55bb \u7b26\u53f7\u8868 \u540d\u7247\u672c\uff1a\u8bb0\u5f55\u201c\u8c01\u662f\u8c01\u201d\u3001\u201c\u4f4f\u54ea\u201d \u91cd\u5b9a\u4f4d\u8868 TODO \u6e05\u5355\uff1a\u54ea\u4e9b\u5730\u65b9\u8981\u7b49\u201c\u5730\u5740\u786e\u5b9a\u201d\u540e\u518d\u6539 <p>\u6c47\u7f16\u5668\uff1a</p> <p>\u201c\u6211\u5148\u628a\u540d\u5b57\u90fd\u8bb0\u4e0b\uff08\u7b26\u53f7\u8868\uff09\uff0c\u9047\u5230\u6682\u65f6\u6ca1\u5730\u5740\u7684\u5730\u65b9\u6253\u4e2a\u6807\u8bb0\uff08\u91cd\u5b9a\u4f4d\u8868\uff09\u3002\u201d</p> <p>\u94fe\u63a5\u5668\uff1a</p> <p>\u201c\u6211\u6765\u5e2e\u4f60\u8865\u5168\u8fd9\u4e9b\u6807\u8bb0\uff0c\u8ba9\u6bcf\u6761\u6307\u4ee4\u90fd\u6307\u5411\u6b63\u786e\u7684\u5730\u5740\u3002\u201d</p>"},{"location":"CO/cs61c/#_29","title":"\ud83e\udde9 \u4e94\u3001\u603b\u7ed3\u5bf9\u6bd4\u8868","text":"\u9879\u76ee \u7b26\u53f7\u8868 \u91cd\u5b9a\u4f4d\u8868 \u4f5c\u7528 \u4fdd\u5b58\u7b26\u53f7\u53ca\u5176\u5b9a\u4e49\u4f4d\u7f6e \u4fdd\u5b58\u9700\u8981\u4fee\u6b63\u7684\u5f15\u7528\u4f4d\u7f6e \u5185\u5bb9 \u540d\u79f0\u3001\u6bb5\u3001\u5730\u5740\u3001\u7c7b\u578b \u6bb5\u504f\u79fb\u3001\u7b26\u53f7\u5f15\u7528\u3001\u7c7b\u578b \u8c01\u751f\u6210 \u6c47\u7f16\u5668 \u6c47\u7f16\u5668 \u8c01\u4f7f\u7528 \u94fe\u63a5\u5668 \u94fe\u63a5\u5668 \u793a\u4f8b <code>msg \u2192 .data+0x00</code> <code>.text+0x08</code> \u5f15\u7528\u4e86 <code>msg</code>"},{"location":"CO/cs61c/#_30","title":"\ud83e\udde9 \u4e00\u3001\u6c47\u7f16\u5668\u7684\u603b\u4f53\u76ee\u6807","text":"<p>\u6c47\u7f16\u5668\u7684\u4efb\u52a1\u662f\uff1a</p> <p>\u628a\u6c47\u7f16\u6e90\u6587\u4ef6 <code>.s</code> \u7ffb\u8bd1\u6210\u76ee\u6807\u6587\u4ef6 <code>.o</code>\uff0c <code>.o</code> \u6587\u4ef6\u4e2d\u4e0d\u76f4\u63a5\u5305\u542b\u6700\u7ec8\u5730\u5740\uff0c\u800c\u662f\u5305\u542b\uff1a</p> <ul> <li>\u7ffb\u8bd1\u597d\u7684\u673a\u5668\u6307\u4ee4\uff08.text/.data \u6bb5\uff09</li> <li>\u7b26\u53f7\u8868\uff08\u8bb0\u5f55\u6bcf\u4e2a\u540d\u5b57\u662f\u4ec0\u4e48\uff09</li> <li>\u91cd\u5b9a\u4f4d\u8868\uff08\u8bb0\u5f55\u54ea\u91cc\u9700\u8981\u7b49\u94fe\u63a5\u5668\u6765\u8865\u5730\u5740\uff09</li> </ul>"},{"location":"CO/cs61c/#_31","title":"\u2699\ufe0f \u4e8c\u3001\u6c47\u7f16\u5668\u7684\u4e09\u5927\u6838\u5fc3\u5de5\u4f5c","text":""},{"location":"CO/cs61c/#1_2","title":"\ud83e\uddf1 1. \u7ffb\u8bd1\uff1a\u628a\u6c47\u7f16\u6307\u4ee4\u53d8\u6210\u673a\u5668\u7801\u6a21\u677f","text":"<p>\u6c47\u7f16\u5668\u626b\u63cf <code>.s</code> \u6587\u4ef6\uff0c\u9010\u884c\u7ffb\u8bd1\uff1a</p> <pre><code>addi t0, t1, 4\n</code></pre> <p>\u27a1\ufe0f \u8f6c\u6362\u4e3a\u673a\u5668\u7801\uff1a</p> <pre><code>000000000100 01001 000 01000 0010011\n</code></pre> <p>\u4f2a\u6307\u4ee4\u4e5f\u4f1a\u5c55\u5f00\uff1a</p> <pre><code>la a0, msg\n</code></pre> <p>\u27a1\ufe0f \u5b9e\u9645\u751f\u6210\uff1a</p> <pre><code>lui a0, %hi(msg)\naddi a0, a0, %lo(msg)\n</code></pre> <p>\u5230\u8fd9\u91cc\uff0c\u6c47\u7f16\u5668\u5df2\u7ecf\u80fd\u751f\u6210\u673a\u5668\u6307\u4ee4\u7684\u7ed3\u6784\uff0c\u4f46\u6709\u7684\u6307\u4ee4\u8fd8\u4e0d\u80fd\u586b\u4e0a\u7acb\u5373\u6570\uff08\u56e0\u4e3a\u7b26\u53f7\u7684\u5730\u5740\u8fd8\u6ca1\u786e\u5b9a\uff09\u3002</p>"},{"location":"CO/cs61c/#2-symbol-table","title":"\ud83d\udcc7 2. \u5efa\u7b26\u53f7\u8868\uff08Symbol Table\uff09","text":"<p>\u6c47\u7f16\u5668\u5728\u7ffb\u8bd1\u8fc7\u7a0b\u4e2d\uff0c\u8bb0\u5f55\u6240\u6709\u201c\u5e26\u540d\u5b57\u7684\u4e1c\u897f\u201d\u7684\u4f4d\u7f6e\uff1a</p> \u7b26\u53f7\u540d \u6240\u5728\u6bb5 \u6bb5\u5185\u504f\u79fb \u7ed1\u5b9a\u7c7b\u578b \u7c7b\u578b msg .data 0x0000 LOCAL OBJECT main .text 0x0000 GLOBAL FUNC printf UNDEF 0x0000 EXTERN FUNC <p>\u8fd9\u5f20\u8868\u544a\u8bc9\u94fe\u63a5\u5668\uff1a</p> <p>\u201cmsg \u5728\u6570\u636e\u6bb5\u7684\u504f\u79fb 0x0\uff1bmain \u662f\u5168\u5c40\u51fd\u6570\uff1bprintf \u6211\u6ca1\u5b9a\u4e49\uff0c\u7b49\u4f60\u5e2e\u6211\u627e\u3002\u201d</p>"},{"location":"CO/cs61c/#3-relocation-table","title":"\ud83e\udde9 3. \u5efa\u91cd\u5b9a\u4f4d\u8868\uff08Relocation Table\uff09","text":"<p>\u5f53\u6c47\u7f16\u5668\u53d1\u73b0\u4e00\u6761\u6307\u4ee4\u91cc\u5f15\u7528\u4e86\u672a\u77e5\u5730\u5740\u7684\u7b26\u53f7\uff0c\u6bd4\u5982\uff1a</p> <pre><code>lui a0, %hi(msg)\naddi a0, a0, %lo(msg)\n</code></pre> <p>\u5b83\u77e5\u9053 <code>msg</code> \u7684\u5730\u5740\u8fd8\u6ca1\u786e\u5b9a\uff08\u56e0\u4e3a <code>.data</code> \u6bb5\u5728\u522b\u7684\u6587\u4ef6\u53ef\u80fd\u6709\u5176\u4ed6\u53d8\u91cf\uff09\uff0c \u4e8e\u662f\u751f\u6210\u4e24\u6761\u91cd\u5b9a\u4f4d\u8bb0\u5f55\uff1a</p> \u6bb5 \u504f\u79fb \u7b26\u53f7 \u7c7b\u578b \u8bf4\u660e .text 0x0004 msg R_RISCV_HI20 \u9ad8 20 \u4f4d .text 0x0008 msg R_RISCV_LO12_I \u4f4e 12 \u4f4d <p>\u544a\u8bc9\u94fe\u63a5\u5668\uff1a</p> <p>\u201c\u5f53\u4f60\u77e5\u9053 msg \u7684\u771f\u5b9e\u5730\u5740\u540e\uff0c\u8bf7\u5230 <code>.text</code> \u6bb5\u504f\u79fb 0x4 \u548c 0x8 \u5904\u628a\u7acb\u5373\u6570\u8865\u4e0a\u3002\u201d</p>"},{"location":"CO/cs61c/#_32","title":"\ud83e\udde0 \u4e09\u3001\u6240\u4ee5\u6c47\u7f16\u5668\u5230\u5e95\u5e72\u4e86\u5565\uff08\u4e00\u53e5\u8bdd\u603b\u7ed3\uff09","text":"<p>\u6c47\u7f16\u5668\u628a\u6c47\u7f16\u8bed\u8a00\u8f6c\u6210\u673a\u5668\u7801\u96cf\u5f62\uff0c\u5e76\u5efa\u7acb\u5730\u5740\u5173\u7cfb\u8868\u3002</p> <p>\u66f4\u5177\u4f53\u5730\u8bf4\uff1a</p> \u6b65\u9aa4 \u6c47\u7f16\u5668\u505a\u7684\u4e8b\u60c5 \u8f93\u51fa 1\ufe0f\u20e3 \u89e3\u6790\u6e90\u4ee3\u7801 \u5206\u6790\u6bcf\u6761\u6c47\u7f16\u6307\u4ee4\u548c\u4f2a\u6307\u4ee4 \u4e2d\u95f4\u7ed3\u6784 2\ufe0f\u20e3 \u786e\u5b9a\u6bb5\u5e03\u5c40 <code>.text</code>\u3001<code>.data</code>\u3001<code>.bss</code> \u5404\u81ea\u8d77\u59cb\u5730\u5740\u548c\u5927\u5c0f \u6bb5\u8868 3\ufe0f\u20e3 \u5efa\u7b26\u53f7\u8868 \u8bb0\u5f55\u6bcf\u4e2a\u6807\u7b7e\u3001\u51fd\u6570\u3001\u53d8\u91cf\u540d\u53ca\u5176\u6bb5\u548c\u504f\u79fb <code>.symtab</code> 4\ufe0f\u20e3 \u7ffb\u8bd1\u6210\u673a\u5668\u7801 \u751f\u6210\u6307\u4ee4\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f <code>.text</code> \u6bb5 5\ufe0f\u20e3 \u751f\u6210\u91cd\u5b9a\u4f4d\u9879 \u5bf9\u672a\u786e\u5b9a\u5730\u5740\u7684\u7b26\u53f7\u751f\u6210\u201c\u5f85\u586b\u5751\u4fe1\u606f\u201d <code>.rel.text</code>\u3001<code>.rel.data</code> 6\ufe0f\u20e3 \u8f93\u51fa\u76ee\u6807\u6587\u4ef6 \u628a\u4ee5\u4e0a\u5185\u5bb9\u6253\u5305\u4e3a <code>.o</code> ELF \u76ee\u6807\u6587\u4ef6"},{"location":"CO/cs61c/#_33","title":"\ud83e\udded \u56db\u3001\u5f62\u8c61\u6bd4\u55bb","text":"<p>\u53ef\u4ee5\u628a\u6574\u4e2a\u8fc7\u7a0b\u60f3\u8c61\u6210\u88c5\u4fee\u623f\u5b50\uff1a</p> \u89d2\u8272 \u6bd4\u55bb \u6c47\u7f16\u5668 \u6728\u5320\uff1a\u5148\u642d\u597d\u6846\u67b6\uff08\u673a\u5668\u7801\uff09\uff0c\u4f46\u4e00\u4e9b\u5bb6\u5177\u4f4d\u7f6e\uff08\u5730\u5740\uff09\u8fd8\u6ca1\u5b9a \u7b26\u53f7\u8868 \u6237\u578b\u56fe\uff1a\u6807\u660e\u6bcf\u4e2a\u623f\u95f4\u548c\u7269\u54c1\u7684\u540d\u5b57\u4e0e\u4f4d\u7f6e \u91cd\u5b9a\u4f4d\u8868 \u5f85\u88c5\u4fee\u6e05\u5355\uff1a\u8bb0\u5f55\u201c\u7b49\u6750\u6599\u5230\u4e86\u518d\u88c5\u8fd9\u91cc\u201d \u94fe\u63a5\u5668 \u603b\u5305\u5de5\uff1a\u6536\u9f50\u6240\u6709 <code>.o</code> \u6587\u4ef6\uff0c\u7b97\u51fa\u6700\u7ec8\u5730\u5740\uff0c\u628a\u5751\u8865\u4e0a"},{"location":"CO/cs61c/#elf","title":"\ud83e\uddfe \u4e94\u3001\u6700\u7ec8\u6c47\u7f16\u5668\u7684\u8f93\u51fa\u6587\u4ef6\u5185\u5bb9\uff08ELF\u7ed3\u6784\u793a\u610f\uff09","text":"<pre><code>hello.o\n\u251c\u2500\u2500 .text       # \u7ffb\u8bd1\u540e\u7684\u673a\u5668\u7801\n\u251c\u2500\u2500 .data       # \u9759\u6001\u6570\u636e\n\u251c\u2500\u2500 .bss        # \u672a\u521d\u59cb\u5316\u53d8\u91cf\n\u251c\u2500\u2500 .symtab     # \u7b26\u53f7\u8868\n\u251c\u2500\u2500 .rel.text   # \u91cd\u5b9a\u4f4d\u4fe1\u606f\uff08\u6307\u4ee4\u5f15\u7528\u7684\u7b26\u53f7\uff09\n\u251c\u2500\u2500 .rel.data   # \u91cd\u5b9a\u4f4d\u4fe1\u606f\uff08\u6570\u636e\u5f15\u7528\u7684\u7b26\u53f7\uff09\n\u2514\u2500\u2500 \u5934\u90e8\u4fe1\u606f    # ELF \u6587\u4ef6\u5934\u7b49\u5143\u6570\u636e\n</code></pre>"},{"location":"CO/cs61c/#_34","title":"\u2705 \u516d\u3001\u603b\u7ed3\u4e00\u53e5\u8bdd\u8bb0\u5fc6","text":"<p>\u6c47\u7f16\u5668 = \u7ffb\u8bd1\u5668 + \u5236\u8868\u5458 + \u7559\u5751\u5de5\u3002</p> <ul> <li>\u7ffb\u8bd1\u5668\uff1a\u628a\u6c47\u7f16\u6307\u4ee4\u7ffb\u6210\u673a\u5668\u7801</li> <li>\u5236\u8868\u5458\uff1a\u5efa\u7acb\u7b26\u53f7\u8868\uff0c\u544a\u8bc9\u8c01\u5728\u54ea</li> <li>\u7559\u5751\u5de5\uff1a\u9047\u5230\u672a\u77e5\u5730\u5740\u5c31\u6253\u6807\u8bb0\uff0c\u7b49\u94fe\u63a5\u5668\u8865</li> </ul> <p></p> <p>\u786c\u7f16\u7801\u662f\u5199\u6b7b\u7684\u4e1c\u897f</p>"},{"location":"CO/cs61c/#_35","title":"\u94fe\u63a5\u5668","text":"<p>\u7f16\u8bd1\u540e\u7684\u6c47\u7f16\u4e2d\uff1a</p> <p>\u5c40\u90e8\u53d8\u91cf \u4e0d\u76f4\u63a5\u5b58\u5728\u4e8e\u4efb\u4f55\u6bb5\u4e2d\uff0c\u800c\u662f\u7531 .text\uff08\u4ee3\u7801\u6bb5\uff09\u7684\u6307\u4ee4\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u6808\u64cd\u4f5c\u52a8\u6001\u5206\u914d\u3002</p> <p>\u9759\u6001\u53d8\u91cf / \u5168\u5c40\u53d8\u91cf \u4f1a\u88ab\u653e\u8fdb .data\uff08\u6216 .bss\uff09\u6bb5\u4e2d\uff0c\u7b49\u5f85\u94fe\u63a5\u5668\u7edf\u4e00\u5b89\u6392\u5b83\u4eec\u5728\u201c\u9759\u6001\u533a\u201d\u7684\u6700\u7ec8\u5730\u5740\u3002</p> <p>\u5185\u5b58\u901a\u5e38\u88ab\u5212\u5206\u6210\u51e0\u5757\uff08\u4ee5 C \u7a0b\u5e8f\u4e3a\u4f8b\uff09\uff1a</p> \u533a\u57df \u5185\u5bb9 \u5206\u914d\u65f6\u95f4 \u4ee3\u7801\u533a (.text) \u51fd\u6570\u673a\u5668\u7801 \u7f16\u8bd1 + \u94fe\u63a5\u786e\u5b9a \u9759\u6001/\u5168\u5c40\u533a (.data/.bss) \u5168\u5c40\u53d8\u91cf\u3001\u9759\u6001\u53d8\u91cf \u94fe\u63a5\u65f6\u786e\u5b9a\u5730\u5740\uff0c\u7a0b\u5e8f\u8fd0\u884c\u671f\u95f4\u4e00\u76f4\u5b58\u5728 \u6808\u533a (stack) \u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u8c03\u7528\u5e27 \u8fd0\u884c\u65f6\u5206\u914d/\u91ca\u653e \u5806\u533a (heap) \u52a8\u6001\u5206\u914d\uff08malloc/new\uff09 \u8fd0\u884c\u65f6 <p></p> <p> </p> <p>\u8fd0\u884c\u6210\u672c\u9ad8\u4e00\u70b9</p> <p></p> <p>\u5728\u673a\u5668\u4ee3\u7801\u7ea7\u522b\u94fe\u63a5</p>"},{"location":"CO/cs61c/#os","title":"\u52a0\u8f7d\u5668\uff08OS\uff09","text":"<p>162\u8bfe\u7a0b \u53ef\u6267\u884c\u6587\u4ef6\u5728\u78c1\u76d8\u91cc</p> <p>\u5e72\u52a8\u6001\u94fe\u63a5\u7684\u6d3b  </p>"},{"location":"CO/cs61c/#_36","title":"\u4f8b\u5b50   <p>\u7ea2\u8272\u662f\u94fe\u63a5\u5668\u7684\u4efb\u52a1</p> <p> \u6ce8\u610f\u8865\u507f</p> <p>\u628a\u8865\u7801\u53d6\u53cd+1\u5f97\u5230\u7edd\u5bf9\u503c</p>","text":""},{"location":"CO/cs61c/#_37","title":"\u5355\u6838\u5904\u7406\u5668 <p> \u53ef\u4ee5\u6bcf\u4e2a\u6307\u4ee4\u6bcf\u4e2a\u6570\u636e\u8def\u5f84  \u4f46\u662f\u73b0\u5728\u662f\u5355\u4e2a\u6570\u636e\u8def\u5f84 \u7531control\u6765\u63a7\u5236\u5b9e\u73b0\u4ec0\u4e48</p> <p></p> <p></p> <p>\u5206\u800c\u6cbb\u4e4b\u5b9e\u73b0\u6307\u4ee4 </p> <p>IMEM \u6307\u4ee4\u5185\u5b58</p> <p>DMEM \u6570\u636e\u5185\u5b58</p> <p>\u5728\u7269\u7406\u5c42\u9762\u7684\u4e00\u5757\u5185\u5b58\u4e0a </p> <p>\u90fd\u5728\u5355\u5468\u671f\u5b9e\u73b0</p>","text":""},{"location":"CO/cs61c/#_38","title":"\u5bc4\u5b58\u5668","text":"<p>\u5bc4\u5b58\u5668\u5728\u4f7f\u80fd\u65f6\u5728\u65f6\u949f\u7684\u4e0a\u5347\u6cbf\u5199\u5165  \u8bfb\u53d6\u4e0d\u9700\u8981\u65f6\u949f  \u4f46\u662f\u4f1a\u9700\u8981\u4e00\u4e9b\u8bbf\u95ee\u65f6\u95f4</p> <p>\u53ef\u4ee5\u540c\u65f6\u8bfb\u4e24\u4e2a</p>"},{"location":"CO/cs61c/#_39","title":"\u5185\u5b58","text":"<p> \u4e5f\u6709\u8bfb\u5199\u8bbf\u95ee\u65f6\u95f4</p> <p>rs1 rs2 rd</p> <p></p> <p></p> <p>\u5f00\u59cb\u5b9e\u73b0\u4e0d\u540c\u901a\u8def\uff1a</p> <p>IMEM\u4e0d\u9700\u8981\u65f6\u949f</p> <p></p> <p></p> <p>\u6709\u7b26\u53f7\u6269\u5c55\uff1a\u9ad8\u4f4d\u5168\u63a5 imm \u6700\u9ad8\u4f4d</p> <p>\u5bc4\u5b58\u5668\u603b\u662f\u8bfb\u53d6 \u53ea\u6709\u5199\u5165\u624d\u6309\u7167\u65f6\u949f</p> <p>risc-v\u662f\u52a0\u8f7d\u50a8\u5b58\u67b6\u6784\uff1a\u6ca1\u6709\u5176\u4ed6\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee\u5185\u5b58</p> <p>jarl </p> <p></p> <p></p>"},{"location":"CO/cs61c/#_40","title":"\u6027\u80fd\u6d4b\u8bd5","text":""},{"location":"CO/cs61c/#_41","title":"\u6d41\u6c34\u7ebf <p>\u7406\u8bba\u52a0\u901f4\u500d\uff0c4\u4e2a\u9636\u6bb5\uff08\u957f\u5ea6\u4e3al\uff0c\u4efb\u52a1\u91cf\u4e3ax \u539f\u957f\u5ea6\u4e3ax\uff0c\u540e4l=x\uff09</p> <p>\u4f46\u662f\u6d41\u6c34\u7ebf\u7684\u586b\u5145\u548c\u6e05\u9664\u9700\u8981\u65f6\u95f4</p> <p></p> <p>\u7b97\u4e86\u4e00\u4e0b\u8fd8\u771f\u662f\uff0c\u51cf\u5c11\u4e0d\u4e86\u592a\u591a\u65f6\u95f4</p>","text":""},{"location":"CO/cs61c/#throughput","title":"\ud83e\udde9 \u4e00\u3001\u4ec0\u4e48\u662f\u541e\u5410\u91cf\uff08Throughput\uff09","text":"<p>\u541e\u5410\u91cf = \u5355\u4f4d\u65f6\u95f4\u5185\u7cfb\u7edf\u5b8c\u6210\u7684\u4efb\u52a1\u6570\u91cf\u3002</p> <p>\u5bf9\u4e8e\u5904\u7406\u5668\u6765\u8bf4\uff0c\u5c31\u662f\u6bcf\u79d2\u80fd\u5b8c\u6210\u591a\u5c11\u6761\u6307\u4ee4\uff08instructions per second\uff09\u3002</p>"},{"location":"CO/cs61c/#_42","title":"\u2705 \u4e3e\u4e2a\u7b80\u5355\u4f8b\u5b50","text":"\u60c5\u51b5 \u6bcf\u6761\u6307\u4ee4\u8017\u65f6 \u541e\u5410\u91cf \u4e0d\u6d41\u6c34\u7ebf 5 ns 1 / 5 ns = 0.2 \u6307\u4ee4/ns \u6d41\u6c34\u7ebf\uff085\u7ea7\uff09 \u6bcf\u7ea7 1 ns \u7406\u8bba\u4e0a\u6bcf 1 ns \u51fa\u4e00\u6761\u6307\u4ee4 \u2192 1 \u6307\u4ee4/ns <p>\ud83d\udc49 \u6240\u4ee5\u6d41\u6c34\u7ebf\u7684\u4f5c\u7528\u662f \u63d0\u9ad8\u541e\u5410\u91cf\uff08Throughput\uff09\uff0c \u800c\u4e0d\u662f\u7f29\u77ed\u5355\u6761\u6307\u4ee4\u7684\u5ef6\u8fdf\uff08Latency\uff09\u3002</p>"},{"location":"CO/cs61c/#_43","title":"\u2699\ufe0f \u4e8c\u3001\u6d41\u6c34\u7ebf\u662f\u600e\u4e48\u5de5\u4f5c\u7684","text":"<p>\u5047\u8bbe\u6709 5 \u4e2a\u9636\u6bb5\uff08IF, ID, EX, MEM, WB\uff09\uff1a</p> <pre><code>\u9636\u6bb5: \u53d6\u6307 \u2192 \u8bd1\u7801 \u2192 \u6267\u884c \u2192 \u8bbf\u5b58 \u2192 \u5199\u56de\n</code></pre> <ul> <li>\u6bcf\u4e2a\u9636\u6bb5\u8d1f\u8d23\u4e00\u90e8\u5206\u5de5\u4f5c\uff1b</li> <li>\u4e0b\u4e00\u6761\u6307\u4ee4\u53ef\u4ee5\u5728\u524d\u4e00\u6761\u6307\u4ee4\u7684\u4e0b\u4e00\u4e2a\u9636\u6bb5\u540c\u65f6\u6267\u884c\u3002</li> </ul> <p>\u5c31\u50cf\u5de5\u5382\u6d41\u6c34\u7ebf\u4e00\u6837\uff1a \u4e00\u8f86\u8f66\u5728\u55b7\u6f06\u65f6\uff0c\u4e0b\u4e00\u8f86\u53ef\u4ee5\u710a\u63a5\u9aa8\u67b6\u3002</p>"},{"location":"CO/cs61c/#_44","title":"\u23f1\ufe0f \u4e09\u3001\u4e3a\u4ec0\u4e48\u201c\u88ab\u6700\u6162\u9636\u6bb5\u9650\u5236\u201d","text":"<p>\u5173\u952e\u5728\u4e8e\uff1a</p> <p>\u6240\u6709\u9636\u6bb5\u5fc5\u987b \u540c\u6b65\uff0c\u6bcf\u4e2a\u9636\u6bb5\u7684\u65f6\u95f4\u53d6\u51b3\u4e8e \u6700\u6162\u9636\u6bb5\u3002</p>"},{"location":"CO/cs61c/#_45","title":"\ud83d\udd0d \u4e3e\u4e2a\u4f8b\u5b50","text":"\u9636\u6bb5 \u5ef6\u8fdf\uff08ns\uff09 IF 1 ID 1.5 EX 2 MEM 1 WB 1 <p>\u90a3\u4e48\uff1a</p> <ul> <li>\u6bcf\u6761\u6307\u4ee4\u7684\u4e00\u4e2a\u9636\u6bb5\u6700\u6162\u8981\u82b1 2 ns\uff08\u5728 EX \u9636\u6bb5\uff09\u3002</li> <li>\u6240\u4ee5\u6574\u4e2a\u6d41\u6c34\u7ebf\u7684 \u65f6\u949f\u5468\u671f\u5fc5\u987b \u2265 2 ns\uff0c\u5426\u5219\u6700\u6162\u9636\u6bb5\u6765\u4e0d\u53ca\u5b8c\u6210\u3002</li> </ul>"},{"location":"CO/cs61c/#_46","title":"\ud83d\udcc8 \u7ed3\u679c","text":"\u9879\u76ee \u542b\u4e49 \u503c \u65f6\u949f\u5468\u671f \u88ab\u6700\u6162\u9636\u6bb5\u51b3\u5b9a 2 ns \u541e\u5410\u91cf \u6bcf\u4e2a\u5468\u671f\u5b8c\u6210\u4e00\u6761\u6307\u4ee4 1 / 2 ns = 0.5 \u6307\u4ee4/ns <p>\u5373\u4f7f\u5176\u4ed6\u9636\u6bb5\u66f4\u5feb\uff0c\u4e5f\u5f97\u7b49 EX \u9636\u6bb5\u6162\u6162\u505a\u5b8c\u3002 \u6240\u4ee5\u6574\u4e2a\u6d41\u6c34\u7ebf \u50cf\u4e00\u961f\u4eba\u88ab\u6700\u6162\u7684\u4eba\u62d6\u6162\u4e86\u901f\u5ea6\u3002</p>"},{"location":"CO/cs61c/#vs","title":"\ud83d\udd04 \u56db\u3001\u5ef6\u8fdf vs \u541e\u5410\u91cf","text":"\u6982\u5ff5 \u542b\u4e49 \u5f71\u54cd \u5ef6\u8fdf\uff08Latency\uff09 \u5355\u4e2a\u4efb\u52a1\u5b8c\u6210\u7684\u65f6\u95f4 \u4e0d\u53d8\u751a\u81f3\u7565\u589e \u541e\u5410\u91cf\uff08Throughput\uff09 \u5355\u4f4d\u65f6\u95f4\u5b8c\u6210\u7684\u6307\u4ee4\u6570\u91cf \u63d0\u9ad8\u5f88\u591a <p>\u6d41\u6c34\u7ebf\u7684\u672c\u8d28\uff1a\u727a\u7272\u5ef6\u8fdf\uff0c\u6362\u53d6\u541e\u5410\u91cf\u3002</p> \u9879\u76ee \u8bf4\u660e \u6bcf\u6761\u6307\u4ee4\u5ef6\u8fdf\uff08Latency\uff09 \u4e0d\u53d8\u751a\u81f3\u7565\u589e\u52a0\uff08\u56e0\u4e3a\u6709\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\uff09 \u541e\u5410\u91cf\uff08Throughput\uff09 \u63d0\u9ad8\uff08\u591a\u6761\u6307\u4ee4\u540c\u65f6\u5728\u4e0d\u540c\u9636\u6bb5\uff09 \u6bcf\u6761\u6307\u4ee4\u542f\u52a8\u65f6\u95f4\uff08\u9996\u6761\u8f93\u51fa\uff09 \u63a8\u8fdf\uff08\u8981\u7b49\u6d41\u6c34\u7ebf\u201c\u586b\u6ee1\u201d\uff09 \u6bcf\u4e2a\u9636\u6bb5\u95f4\u9700\u8981\u989d\u5916\u5bc4\u5b58\u5668\u5ef6\u8fdf \u589e\u52a0\u786c\u4ef6\u5ef6\u65f6"},{"location":"CO/cs61c/#_47","title":"\u5f00\u59cb\u5b9e\u73b0 <p>\u5bc4\u5b58\u5668\u5199\u5165\u662f\u65f6\u5e8f\u7684\uff08\u9700\u8981\u65f6\u949f\u6cbf\uff09\uff0c\u5bc4\u5b58\u5668\u8bfb\u53d6\u662f\u7ec4\u5408\u7684\uff08\u76f4\u63a5\u8bfb Q \u4fe1\u53f7\uff09</p> <p>\u6d41\u6c34\u7ebf CPU \u5fc5\u987b \u7528\u201c\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\uff08Pipeline Registers\uff09\u201d\u9694\u79bb\u6bcf\u4e2a\u9636\u6bb5\u3002</p>  <p>\u5982\u679c\u6ca1\u6709\u201c\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u201d\uff0c\u4e0a\u4e00\u9636\u6bb5\u7684\u8f93\u51fa\u4f1a\u5728\u540c\u4e00\u62cd\u88ab\u4e0b\u4e00\u6761\u6307\u4ee4\u8986\u76d6\uff0c\u6574\u4e2a\u6d41\u6c34\u7ebf\u6839\u672c\u8dd1\u4e0d\u8d77\u6765\u3002</p>","text":""},{"location":"CO/cs61c/#1_3","title":"\ud83d\udfe5 1. \u4e3a\u4ec0\u4e48\u6d41\u6c34\u7ebf\u4e00\u5b9a\u8981\u201c\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u201d\uff1f <p>\u6d41\u6c34\u7ebf\u5206\u4e94\u9636\u6bb5\uff08\u7ecf\u5178 RISC\uff09\uff1a</p> <pre><code>IF  \u2192  ID  \u2192  EX  \u2192  MEM  \u2192  WB\n</code></pre> <p>\u5982\u679c\u4e0d\u7528\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\uff0c\u90a3\u4e48\uff1a</p> <ul> <li>IF \u9636\u6bb5\u4ea7\u751f\u7684 PC\u3001\u6307\u4ee4\u4f1a\u76f4\u63a5\u88ab\u4e0b\u4e00\u6b21 IF \u66f4\u65b0</li> <li>ID \u9636\u6bb5\u89e3\u6790\u6307\u4ee4\u65f6\uff0c\u7528\u7684\u6307\u4ee4\u4f1a\u5728\u540c\u4e00\u4e2a\u5468\u671f\u88ab\u4e0b\u4e00\u6761\u6307\u4ee4\u8986\u76d6</li> <li>EX \u9636\u6bb5\u7684\u64cd\u4f5c\u6570\u6ca1\u6709\u4fdd\u5b58\u4f4d\u7f6e</li> <li>MEM \u9636\u6bb5\u8bfb\u5199\u7ed3\u679c\u4e0d\u7a33\u5b9a</li> <li>WB \u8981\u5199\u56de\u8c01\uff1f\u4e0d\u77e5\u9053\uff0c\u56e0\u4e3a\u6570\u636e\u88ab\u8986\u76d6\u5b8c\u4e86</li> </ul> <p>\u6700\u7ec8\u53d8\u6210\uff1a</p>  <p>\u6240\u6709\u9636\u6bb5\u5171\u4eab\u540c\u4e00\u4efd\u4fe1\u53f7\uff0c\u6bcf\u6761\u6307\u4ee4\u521a\u5f00\u59cb\u6267\u884c\u5c31\u88ab\u4e0b\u4e00\u6761\u8986\u76d6 \u2192 CPU \u6839\u672c\u4e0d\u80fd\u6d41\u6c34\u5904\u7406\u3002</p>  <p>\u4e5f\u5c31\u662f\u8bf4\uff1a</p> <p>\u6d41\u6c34\u7ebf\u5982\u679c\u4e0d\u52a0\u5bc4\u5b58\u5668\uff0c\u6574\u4e2a CPU \u53ea\u80fd\u6bcf\u62cd\u6267\u884c\u4e00\u6761\u6574\u6307\u4ee4\uff08\u975e\u6d41\u6c34\uff09\u3002</p>","text":""},{"location":"CO/cs61c/#2_2","title":"\ud83d\udfe6 2. \u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u662f\u4ec0\u4e48\uff1f <p>\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668 = \u5728\u6bcf\u4e24\u4e2a\u9636\u6bb5\u4e4b\u95f4\u52a0\u4e00\u4e2a\u5bc4\u5b58\u5668\uff0c\u7528\u65f6\u949f\u6cbf\u9501\u4f4f\u6570\u636e\u9632\u6b62\u88ab\u8986\u76d6</p> <p>\u6bd4\u5982\uff1a</p> <pre><code>IF/ID \u5bc4\u5b58\u5668  \nID/EX \u5bc4\u5b58\u5668  \nEX/MEM \u5bc4\u5b58\u5668  \nMEM/WB \u5bc4\u5b58\u5668  \n</code></pre> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\nIF \u2192  \u2502 IF/ID\u2502 \u2192ID \u2502ID/EX \u2502 \u2192EX \u2502EX/MEM\u2502 \u2192MEM \u2192 ...\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u6bcf\u4e2a\u6a21\u5757\u4e4b\u95f4\u9694\u79bb\u6210\u72ec\u7acb\u7684\u8282\u62cd\u3002</p>","text":""},{"location":"CO/cs61c/#3_1","title":"\ud83d\udfe9 3. \u7528\u4e00\u4e2a\u4f8b\u5b50\u770b\u8986\u76d6\u95ee\u9898\uff08\u9a6c\u4e0a\u61c2\uff09 <p>\u5047\u8bbe\u4f60\u6ca1\u6709\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\uff0c\u53ea\u6709\u8fd9\u4e24\u4e2a\u4fe1\u53f7\uff1a</p> <pre><code>instr\npc\n</code></pre>","text":""},{"location":"CO/cs61c/#1_4","title":"\u5468\u671f 1\uff1a","text":"<p>IF \u5f97\u5230\u6307\u4ee4 A \u2192 instr = A</p>"},{"location":"CO/cs61c/#id-instr-a","title":"\u540c\u5468\u671f ID \u89e3\u6790 instr\uff08= A\uff09","text":""},{"location":"CO/cs61c/#2_3","title":"\u5468\u671f 2\uff1a","text":"<p>IF \u5f97\u5230\u6307\u4ee4 B \u2192 instr = B\uff08\u8986\u76d6\u6389 A\uff09</p> <p>\u4f46\u6b64\u65f6 ID \u8fd8\u5728\u5904\u7406 A\uff01</p> <p>\u4f46\u662f\uff1a</p> <p>instr \u5df2\u7ecf\u53d8\u6210 B \u4e86\u3002</p> <p>\u6240\u4ee5 ID \u89e3\u6790\u5230\u7684\u53d8\u6210\u4e86 \u9519\u8bef\u7684 B\uff0cA \u5f7b\u5e95\u5e9f\u6389\u3002</p> <p>\u6240\u4ee5\u6ca1\u6709\u5bc4\u5b58\u5668\u5c31\u5b8c\u86cb\u4e86\u3002</p>"},{"location":"CO/cs61c/#4_1","title":"\ud83d\udfe7 4. \u6709\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u540e\uff0c\u60c5\u51b5\u53d8\u6210\u8fd9\u6837\uff1a <p>\u5728\u5468\u671f\u672b\uff0c\u5bc4\u5b58\u5668 \u9501\u4f4f \u6bcf\u9636\u6bb5\u7684\u6570\u636e\uff1a</p> <pre><code>IF \u2192 (IF/ID \u5bc4\u5b58\u5668\u9501\u4f4f A)\nID \u2192 (ID/EX \u5bc4\u5b58\u5668\u9501\u4f4f A)\nEX \u2192 (EX/MEM \u9501\u4f4f A)\nMEM \u2192 \u2026\n</code></pre> <p>\u540c\u65f6\uff1a</p> <p>\u4e0b\u4e00\u6761\u6307\u4ee4 B \u5728 IF \u8fd0\u884c \u4f46 \u4e0d\u4f1a\u8986\u76d6 IF/ID \u4e2d\u7684 A\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e4b\u95f4\u52a0\u4e86\u5bc4\u5b58\u5668\u3002</p>","text":""},{"location":"CO/cs61c/#5_1","title":"\ud83d\udfe8 5. \u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u7684\u672c\u8d28 <p>\u4e00\u53e5\u8bdd\uff1a</p>  <p>\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u5c31\u662f\u4e00\u5835\u5899\uff0c\u6bcf\u62cd\u9501\u4f4f\u524d\u4e00\u9636\u6bb5\u7684\u5168\u90e8\u8f93\u51fa\uff0c\u8ba9\u4e0b\u4e00\u9636\u6bb5\u5b89\u5fc3\u5904\u7406\u81ea\u5df1\u7684\u90a3\u6761\u6307\u4ee4\uff0c\u4e0d\u4f1a\u88ab\u4e0b\u4e00\u6761\u8986\u76d6\u3002</p>  <p>\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u662f\u8ba9 CPU \u80fd\u201c\u5e76\u884c\u6267\u884c\u591a\u6761\u6307\u4ee4\u201d\u7684\u6839\u672c\u3002</p>","text":""},{"location":"CO/cs61c/#6","title":"\ud83d\udfe6 6. \u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u91cc\u4f1a\u5b58\u4ec0\u4e48\uff1f <p>\u4ee5 IF/ID \u4e3a\u4f8b\uff1a</p> <pre><code>PC + 4\n\u5f53\u524d\u6307\u4ee4 instruction\n\u53ef\u80fd\u8fd8\u6709\u5f02\u5e38/\u9884\u6d4b\u4fe1\u606f\n</code></pre> <p>ID/EX \u53ef\u80fd\u5b58\uff1a</p> <pre><code>\u64cd\u4f5c\u7801 opcode\n\u6e90\u5bc4\u5b58\u5668\u8bfb\u51fa\u7684\u503c\n\u7acb\u5373\u6570\nALU \u63a7\u5236\u4fe1\u606f\n\u76ee\u6807\u5bc4\u5b58\u5668\u53f7\n</code></pre> <p>\u6bcf\u4e00\u9636\u6bb5\u90fd\u628a\u4e0b\u4e00\u9636\u6bb5\u9700\u8981\u7684\u6570\u636e\u5168\u90e8\u9501\u4f4f\u3002</p>","text":""},{"location":"CO/cs61c/#7","title":"\ud83d\udfea 7. \u7528\u4e00\u53e5\u4f60\u4e00\u542c\u5c31\u61c2\u7684\u8bdd\u603b\u7ed3\uff1a  <p>\u6ca1\u6709\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668 = \u53ea\u6709\u4e00\u4e2a\u5171\u4eab\u201c\u53d8\u91cf\u201d \u2192 \u4e0b\u4e00\u6761\u6307\u4ee4\u4f1a\u8986\u76d6\u4e0a\u4e00\u6761 \u2192 \u6d41\u6c34\u7ebf\u65e0\u6cd5\u5b58\u5728\u3002</p> <p>\u6709\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668 = \u6bcf\u6761\u6307\u4ee4\u5728\u4e0d\u540c\u9636\u6bb5\u90fd\u6709\u81ea\u5df1\u7684\u201c\u6570\u636e\u5feb\u7167\u201d \u2192 \u624d\u80fd\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u6307\u4ee4\u3002</p>   <p></p> <p>\u5355\u5468\u671fCPU \u5468\u671f800ps</p> <p>\u6d41\u6c34\u7ebf\u7684\u662f200ps</p> <p>\u541e\u5410\u91cf\u63d0\u9ad8\uff0c\u6574\u6761\u6307\u4ee4\u5468\u671f\u65f6\u95f4\u53d8\u957f</p> <p>\u7406\u8bba5\u500d\u63d0\u901f\uff0c\u4f46\u662f\u56e0\u4e3a\u6bcf\u4e2a\u9636\u6bb5\u65f6\u95f4\u4e0d\u4e00\u6837\uff0c\u6309\u7167\u6700\u957f200ps\uff0c\u5bfc\u81f4\u635f\u5931\u4e86\u4e00\u70b9\uff0c\u4e5f\u80fd\u63d0\u9ad84\u500d</p>","text":""},{"location":"CO/cs61c/#datapath","title":"Datapath","text":"<p>\u5355\u5468\u671f</p> <p>memory read\u548cregister access\u662f\u7ec4\u5408\u903b\u8f91  \u4e0d\u4f9d\u8d56\u4e8e\u65f6\u949f </p> <p>\u4e94\u4e2a\u9636\u6bb5: </p> <p>\u6d41\u6c34\u7ebf\uff1a</p> <p></p> <p>\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u5206\u5272\u4e0d\u540c\u9636\u6bb5 </p> <p>IF/ID  ID/EX EX/MA MA/WB</p> <p>IF/ID  \uff1a \u4e00\u4e2apc\u5bc4\u5b58\u5668 \u4e00\u4e2ainst\u5bc4\u5b58\u5668\uff0c\u800c\u4e14\u83b7\u53d6\u4e00\u6761\u6307\u4ee4\uff0c\u4e0b\u6e38\u4f1a\u4fdd\u5b58\u4e4b\u524d\u7684\u56db\u6761\u6307\u4ee4\uff08\u540c\u65f6\u67095\u6761\u6307\u4ee4\u8fdb\u884c\uff09</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>\u53d6\u5740\u9636\u6bb5 \u7b2c\u4e00\u4e2a\u65f6\u949f\u4e0a\u6cbfpc\u5199\u5165\u65b0\u503c\u5e76\u4e14pc\u5bc4\u5b58\u5668\u8f93\u51fa\u65b0\u503c\uff0cmemory\u8f93\u51fa\u6307\u4ee4\uff08\u7ec4\u5408\u903b\u8f91\uff09 \u4e0b\u4e00\u4e2a\u65f6\u949f\u4e0a\u6cbf \u6307\u4ee4\u548cpc\u5199\u5165\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\uff0c\u540c\u65f6pc\u5bc4\u5b58\u5668\u8f93\u5165\u65b0\u503c\u5e76\u8f93\u51fa\u65b0\u503c\n</code></pre> <p>\u6bcf\u4e2a\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u90fd\u5fc5\u987b\u4fdd\u5b58\u5728\u8be5\u9636\u6bb5\u6267\u884c\u7684\u6307\u4ee4\u4f4d</p> <p>\u8fd8\u6709\u63a7\u5236\u4f4d (\u6ca1\u592a\u61c2) \u53ea\u4fdd\u5b58\u4e86pc\u6ca1\u6709\u4fdd\u5b58pc+4 \u91cd\u5efa\u4e86pc+4 \u7701\u4e86\u4e00\u5806\u5bc4\u5b58\u5668</p> <p>\u6240\u4ee5\u524d\u4e09\u4e2a\u9636\u6bb5\u662fpc\uff0c\u5185\u5b58\u8bbf\u95ee\u9636\u6bb5\u4f7f\u7528pc+4</p>"},{"location":"CO/cs61c/#pipelining-hazards","title":"\u6d41\u6c34\u7ebf\u5192\u9669\uff08pipelining  Hazards\uff09","text":"<p>\u6709\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4e0d\u540c\u9636\u6bb5\u7684\u6307\u4ee4\u4e4b\u95f4\u4f1a\u4ea7\u751f\u6570\u636e\u3001\u63a7\u5236\u6216\u7ed3\u6784\u4e0a\u7684\u51b2\u7a81\uff0c\u5bfc\u81f4\u6d41\u6c34\u7ebf\u4e0d\u80fd\u987a\u5229\u6267\u884c\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u6d41\u6c34\u7ebf\u5192\u9669\uff08hazard\uff09\u3002</p> <p>\u963b\u6b62\u5728\u6709\u6307\u4ee4\u6b63\u5728\u6267\u884c\u65f6\u542f\u52a8\u65b0\u6307\u4ee4</p>"},{"location":"CO/cs61c/#2_4","title":"2\ufe0f\u20e3 \u5192\u9669\u7684\u4e09\u5927\u7c7b\u578b","text":""},{"location":"CO/cs61c/#1-data-hazard","title":"(1) \u6570\u636e\u5192\u9669\uff08Data Hazard\uff09","text":"<ul> <li>\u539f\u56e0\uff1a\u540e\u4e00\u6761\u6307\u4ee4\u9700\u8981\u4f7f\u7528\u524d\u4e00\u6761\u6307\u4ee4\u8fd8\u6ca1\u8ba1\u7b97\u51fa\u7684\u7ed3\u679c\u3002</li> <li>   \u5bc4\u5b58\u5668\u8981\u652f\u6301\u540c\u65f6\u5199\u5165\u548c\u8bfb\u53d6\uff08\u572861c\u91cc\u662f\u5148\u5199\u5165\u5728\u8bfb\u53d6\uff09</li> <li></li> </ul> <p>\u89e3\u51b3\u65b9\u6cd5\u4e00\uff1a     \u63d2\u5165NOPS \u5373\u5199\u5165x0\u7684\u4efb\u4f55\u6307\u4ee4\uff08\u4f1a\u5bfc\u81f4\u6027\u80fd\u635f\u5931\uff09</p> <p>\u4f46\u662f\u7f16\u8bd1\u5668\u4f1a\u8fdb\u884c\u4e00\u4e9b\u4f18\u5316\uff0c\u63d0\u524d\u8fdb\u884c\u4e0d\u4f9d\u8d56s0\u7684\u6307\u4ee4</p> <p>\u89e3\u51b3\u65b9\u6cd5\u4e8c\uff1a</p> <p>\u8f6c\u53d1\uff1a       \u5728\u6307\u4ee4\u5bc4\u5b58\u5668\u91cc\u6bd4\u8f83\u5bc4\u5b58\u5668 \uff0c\u5224\u65ad\u662f\u5426\u8f6c\u53d1      ALU B\u4e5f\u8981\u8fdb\u884c\u540c\u6837\u7684\u64cd\u4f5c</p> <p>\u5177\u4f53\u64cd\u4f5c\uff1a  </p>"},{"location":"CO/cs61c/#2-control-hazard-branch-hazard","title":"(2) \u63a7\u5236\u5192\u9669\uff08Control Hazard / Branch Hazard\uff09","text":"<ul> <li>\u539f\u56e0\uff1a\u5206\u652f\u6307\u4ee4\uff08\u5982 <code>beq</code>, <code>j</code>\uff09\u4f1a\u6539\u53d8 PC\uff0c\u4f46\u6d41\u6c34\u7ebf\u53ef\u80fd\u5df2\u7ecf\u53d6\u4e86\u4e0b\u4e00\u6761\u6307\u4ee4\u3002</li> <li>\u793a\u4f8b\uff1a</li> </ul> <p><code>asm   beq $t0, $t1, Label   add $t2, $t3, $t4</code></p> <ul> <li>CPU \u8fd8\u4e0d\u786e\u5b9a\u5206\u652f\u662f\u5426\u6210\u7acb\uff0c\u5c31\u53d6\u4e86 <code>add</code> \u6307\u4ee4\uff0c\u53ef\u80fd\u8981\u4e22\u5f03\u3002</li> </ul> <p>\u5206\u652f</p> <p>\u8981\u505c2\u4e2astall\u76f4\u5230\u662f\u5426\u8df3\u8f6c\u88ab\u7b97\u51fa\u6765</p> <p>\u6216\u8005\u6765\u9884\u6d4b \u90a3\u6837\u6211\u4eec\u53ea\u9700\u8981\u5f88\u5c11\u7684\u6982\u7387\u53bbstall\uff08\u6bd4\u5982for\u5faa\u73af\uff0c\u4e0a\u4e00\u6b21\u7ee7\u7eed\u6267\u884c\uff0c\u6211\u4eec\u731c\u6d4b\u8fd9\u6b21\u4e5f\u7ee7\u7eed\u6267\u884c\uff0c\u53ea\u9700\u89811bit\u7684\u9884\u6d4b\uff09  </p> <ol> <li>\u52a0\u8f7d\u7684\u51b2\u7a81 </li> </ol> <p>\u6240\u4ee5\u52a0\u8f7d\u5fc5\u987b\u6682\u505c\u4e86</p> <p>\u6682\u505c\u4e00\u4e2a\u5468\u671f a load delay slot</p> <p>\u6682\u505c\u5b8c\u518d\u8f6c\u53d1 </p> <p>\u6682\u505c\u7684\u5177\u4f53\u64cd\u4f5c\uff1a</p> <p>\uff08\u8fd9\u91cc\u6682\u505c\u7684\u8981\u6c42\u662f\u52a0\u8f7d\u6307\u4ee4\u7684rd\u548c\u540e\u7eed\u6307\u4ee4\u8981\u8bbf\u95ee\u7684\u5bc4\u5b58\u5668\u91cd\u590d\uff09  \u8fd9\u6837 EX \u9636\u6bb5\u5c31\u6267\u884c\u4e86\u4e00\u6761\u7a7a\u6307\u4ee4\uff0c\u8ba9 load \u6570\u636e\u6709\u65f6\u95f4\u5230\u8fbe WB\u3002  </p>"},{"location":"CO/cs61c/#stall-pc-ifididex-nop","title":"stall \u7684\u672c\u8d28\u662f\uff1a\u51bb\u7ed3\u524d\u4e24\u7ea7\uff08PC \u548c IF/ID\uff09\uff0c\u7136\u540e\u5f80\u4e0b\u4e00\u7ea7\uff08ID/EX\uff09\u63d2\u5165 nop\u3002","text":"<p>\u6216\u8005\u6307    \u7f16\u8bd1\u5668\u6765\u5e2e\u5fd9\u5207\u6362\u6210\u540e\u7eed\u4e0d\u4f9d\u8d56\u7684\u6307\u4ee4</p> <p>\u4f8b\u5b50\uff1a  </p>"},{"location":"CO/cs61c/#3-structural-hazard","title":"(3) \u7ed3\u6784\u5192\u9669\uff08Structural Hazard\uff09","text":"<ul> <li>\u539f\u56e0\uff1a\u786c\u4ef6\u8d44\u6e90\u51b2\u7a81\uff0c\u4e0d\u540c\u6307\u4ee4\u540c\u65f6\u9700\u8981\u540c\u4e00\u4e2a\u786c\u4ef6\u5355\u5143\u3002</li> <li> <p>\u793a\u4f8b\uff1a</p> </li> <li> <p>CPU \u53ea\u6709\u4e00\u4e2a\u8bbf\u5b58\u7aef\u53e3\uff0cEX \u9636\u6bb5\u548c MEM \u9636\u6bb5\u540c\u65f6\u8bbf\u95ee\u5185\u5b58\u3002</p> </li> <li> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a</p> </li> <li> <p>\u589e\u52a0\u8d44\u6e90\uff08\u5982\u589e\u52a0\u8bbf\u5b58\u7aef\u53e3\u3001ALU\uff09\u3002</p> </li> <li>\u6d41\u6c34\u7ebf\u505c\u987f\uff08Stall\uff09\u3002</li> </ul> <p>\u4e00\u822c\u901a\u8fc7\u6570\u636e\u901a\u8def\u7684\u8bbe\u8ba1\u6765\u89e3\u51b3 </p> <p>\u5bc4\u5b58\u5668\u67093\u4e2a\u7aef\u53e3\u8981\u652f\u63013\u4e2a\u64cd\u4f5c</p> <p></p> <p>\u6240\u4ee5\u8981\u4e24\u4e2a\u5185\u5b58\uff0c\u628aDMEM\u548cIMEM\u5206\u5f00</p> <p>\u8fd9\u91cc\u7528\u4e86\u7f13\u5b58</p>"},{"location":"CO/cs61c/#_48","title":"Cs61c","text":""},{"location":"CO/cs61c/#3_2","title":"3\ufe0f\u20e3 \u5192\u9669\u7684\u89e3\u51b3\u7b56\u7565\u603b\u7ed3","text":"\u7c7b\u578b \u89e3\u51b3\u65b9\u5f0f \u6570\u636e\u5192\u9669 \u6570\u636e\u8f6c\u53d1\u3001\u6d41\u6c34\u7ebf\u505c\u987f \u63a7\u5236\u5192\u9669 \u5206\u652f\u9884\u6d4b\u3001\u5206\u652f\u5ef6\u8fdf\u69fd\u3001\u505c\u987f \u7ed3\u6784\u5192\u9669 \u589e\u52a0\u786c\u4ef6\u8d44\u6e90\u3001\u505c\u987f <p>\ud83d\udca1 \u7406\u89e3\u6280\u5de7\uff1a</p> <ul> <li>\u6570\u636e\u5192\u9669 = \u201c\u6570\u636e\u6ca1\u51c6\u5907\u597d\u5c31\u7528\u201d</li> <li>\u63a7\u5236\u5192\u9669 = \u201c\u4e0d\u77e5\u9053\u8df3\u54ea\u6761\u5c31\u5148\u6267\u884c\u4e86\u201d</li> <li>\u7ed3\u6784\u5192\u9669 = \u201c\u786c\u4ef6\u6324\u4e0d\u4e0b\uff0c\u6392\u961f\u7b49\u201d</li> </ul>"},{"location":"CO/cs61c/#cache","title":"cache <p> \u7f51\u7edc\u4f20\u8f93 \u786c\u76d8 10\u8fdb\u5236</p> <p>\u5176\u4ed6\u90fd\u662f 2\u8fdb\u5236\uff08\u7f13\u5b58 \u5185\u5b58\uff09</p> <p>  </p> <p>cache \u662f\u5185\u5b58\u5185\u5bb9\u7684\u4e00\u4e2a\u526f\u672c</p> <p>\u6307\u4ee4\u548c\u6570\u636e\u7f13\u5b58\u5206\u5f00\u4e00\u4e2a\u8303\u56f4\u5927 \u4e00\u4e2a\u8303\u56f4\u5c0f\uff09 </p> <p>\u5185\u5b58\u662fDRAM chip  \u5bc4\u5b58\u5668\uff08Register\uff09     \u2193 \u7f13\u5b58\uff08L1 Cache\u3002\u53ef\u80fd\u5728chip\u4e0a\uff09     \u2193 Main Memory \uff08DRAM\uff09     \u2193 \u4e8c\u7ea7\u5185\u5b58\uff08disk/flash\uff09</p> <p>CPU \u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee Disk\uff0c\u53ea\u80fd\u8bbf\u95ee Memory\u3002 Disk \u2192 Memory \u7684\u4f20\u8f93\u5fc5\u987b\u901a\u8fc7 I/O \u63a7\u5236\u5668 + DMA + \u603b\u7ebf \u5b8c\u6210\u3002  \u4e09\u89d2\u5f62\u67b6\u6784\uff1a\uff08\u7279\u70b9\u5982\u4e0b\uff09\uff1a  \u5f80\u4e0b\u4fbf\u5b9c\uff0c\u6162\uff0c\u5927\uff0c\u4e0a\u9762\u7684\u662f\u4e0b\u9762\u7684\u5b50\u96c6</p> <p>\u8fd9\u79cd\u8bbe\u8ba1\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4e3a\u4e86\u7ed9\u4e00\u79cd\u4e0b\u9762\u7684\u5b58\u50a8\u80fd\u8fbe\u5230\u4e0a\u9762\u7684\u5b58\u50a8\u901f\u5ea6\uff0c\u5bb9\u91cf\u4f9d\u7136\u5927\u7684\u9519\u89c9</p>","text":""},{"location":"CO/cs61c/#_49","title":"\u5b9e\u73b0","text":"<p> \u65f6\u95f4\u548c\u7a7a\u95f4\u5c40\u90e8\u6027</p> <ol> <li> <p>\u521a\u4f7f\u7528\u8fc7\u8fd9\u4e2a\uff0c\u4e0b\u6b21\u53ef\u80fd\u8fd8\u4f1a\u4f7f\u7528\uff0c\u90a3\u5c31\u653e\u5728\u672c\u5730</p> </li> <li> <p>\u521a\u8bbf\u95ee\u8fc7\u5185\u5b58\u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u4e0b\u6b21\u53ef\u80fd\u4f1a\u8bbf\u95ee\u90bb\u5c45\uff0c\u6293\u51e0\u4e2a\u5468\u56f4\u7684\u4e1c\u897f\u56de\u6765</p> </li> </ol> <p></p>"},{"location":"CO/cs61c/#direct-mapped-caches","title":"Direct Mapped Caches\uff08\u76f4\u63a5\u6620\u5c04\u7f13\u5b58\uff09","text":"<p>\u6570\u636e\u4f20\u8f93\u7684\u5355\u4f4d\uff1a</p> <p>\u5bc4\u5b58\u5668\uff1a\u5b57</p> <p>\u7f13\u5b58\uff1ablock\uff08\u5757\uff09</p> <p>\u786c\u76d8\uff1a\u6587\u4ef6</p> <p>\u7f13\u5b58\u4ee5\u5757\u4e3a\u5355\u4f4d\u79fb\u5165\u79fb\u51fa\uff0c\u4f20\u8f93\u7684\u5355\u4f4d\uff0c\u7f13\u5b58\u4ee5\u5757\u4e3a\u5bbd\u5ea6</p> <p></p> <p>\u753bmemory \u53ef\u4ee5\u4ee5byte\u4e3a\u5bbd\u5ea6\uff0c\u4e5f\u53ef\u4ee5word\u4e3a\u5bbd\u5ea6</p> <p>\u8fd9\u4e2a\u548ccpu pc\u7684\u90a3\u4e2a\u4f8b\u56fe\u4e0d\u592a\u4e00\u6837\uff0c\u90a3\u4e2a\u56fe\u662f0\u5728\u4e0b\u9762\uff08maybe\uff09</p> <p>\u6c42\u5927\u5c0f\u5b9e\u9645\u662f\u6c42\u9762\u79ef</p> <p> \u5f53block\u662f1\u5b57\u8282\u7684\u65f6\u5019 \u8981\u6c42\u5730\u5740 mol 4 \u5b9e\u9645\u662f\u53d6\u5730\u5740\u7684\u4f4e\u4e24\u4f4d</p> <p>11101  7*4+1 \u5f88\u5feb\uff01  block size = 2 bytes</p> <p>\u4f4e\u4e09\u4f4d\u7684\u524d\u4e24\u4f4d\u7d22\u5f15\u5230\u7f13\u5b58\u7684\u4f4d\u7f6e \u84dd\u8272\u8fd8\u662f\u7ea2\u8272\uff0c\u6700\u540e\u4e00\u4f4d\u8868\u793a\u5de6\u53f3\u5217</p> <p>\u5730\u5740\u53bb\u6389\u4f4e\u4e09\u4f4d\uff08\u8fd9\u4e2a\u5728\u7f13\u5b58\u91cc\u662f\u5df2\u77e5\u7684\uff09\u5c31\u662f\u7f13\u5b58\u7f16\u53f7  </p> <p>\u7528offset\u548cindex\u7684\u4f4d\u5bbd\u6c42\u51fa\u6765\u9762\u79ef</p> <p>8B \u7684data  2-byte blocks  \u67094\u5757</p> <p>offset = 1 \uff08\u5757\u7684\u5927\u5c0f\u51b3\u5b9a\uff09</p> <p>index = 2 \uff08blocks\u4e2a\u6570\uff09</p> <p>tag = 29\uff0832 - 3\uff09</p> <p>8\u5c31\u80fd\u786e\u5b9a\u9762\u79ef </p>"},{"location":"CO/cs61c/#_50","title":"\u4e00\u4e9b\u672f\u8bed","text":"<p>L1 cache = 32 KB</p> <p>\u8fd9 32KB \u53ea\u5305\u542b\u6570\u636e\u5757\uff08data blocks\uff09</p>"}]}